{"version":3,"file":"External-CGcOUWIH.js","sources":["../../node_modules/@arcgis/core/geometry/support/meshUtils/External.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport t from\"../../../request.js\";import{equals as r}from\"../../../core/arrayUtils.js\";import{throwIfAborted as e}from\"../../../core/promiseUtils.js\";import{getFileFormatId as s,getMimeTypeOrFilenameFormatId as n}from\"../../../layers/support/infoFor3D.js\";class a{constructor(t,r,e){this.assetName=t,this.assetMimeType=r,this.parts=e}equals(t){return this===t||this.assetName===t.assetName&&this.assetMimeType===t.assetMimeType&&r(this.parts,t.parts,((t,r)=>t.equals(r)))}isOnService(t){return this.parts.every((r=>r.isOnService(t)))}makeHash(){let t=\"\";for(const r of this.parts)t+=r.partHash;return t}async toBlob(t){const{parts:r}=this;if(1===r.length)return r[0].toBlob(t);const s=await Promise.all(r.map((r=>r.toBlob(t))));return e(t),new Blob(s)}}class i{constructor(t,r){this.partUrl=t,this.partHash=r}equals(t){return this===t||this.partUrl===t.partUrl&&this.partHash===t.partHash}isOnService(t){return this.partUrl.startsWith(`${t.path}/assets/`)}async toBlob(r){const{data:s}=await t(this.partUrl,{responseType:\"blob\"});return e(r),s}}function o(t){return l(t?.source)}function u(t){if(!Array.isArray(t))return!1;return t.every((t=>t instanceof a))}const c=/^(model\\/gltf\\+json)|(model\\/gltf-binary)$/,f=/\\.(gltf|glb)/i;function l(t){if(!t)return!1;if(Array.isArray(t)){return t.some(p)}return p(t)}function p(t){if(t instanceof File){const{type:r,name:e}=t;return c.test(r)||f.test(e)}return c.test(t.assetMimeType)||f.test(t.assetName)}function m(t,r){if(!t)return!1;const{source:e}=t;return y(e,r)}function h(t,r){if(t===r)return!0;const{source:e}=t,{source:s}=r;if(e===s)return!0;if(u(e)&&u(s)){if(e.length!==s.length)return!1;const t=(t,r)=>t.assetName<r.assetName?-1:t.assetName>r.assetName?1:0,r=[...e].sort(t),n=[...s].sort(t);for(let e=0;e<r.length;++e)if(!r[e].equals(n[e]))return!1;return!0}return!1}function y(t,r){if(Array.isArray(t)){const e=t;return e.length>0&&e.every((t=>g(t,r)))}return g(t,r)}function g(t,r){return t instanceof a&&t.isOnService(r)}function b(t,r){return t instanceof File?s(t,r):n(t.assetMimeType,t.assetName,r)}function N(t){return Array.isArray(t)?t:[t]}function A(t){return!!t.original}export{a as ServiceAsset,i as ServiceAssetPart,b as assetFormatId,g as assetIsOnService,m as externalIsOnService,N as externalSourceToMultiPart,h as externalSourcesAreEqual,p as isDisplayAsset,o as isDisplayExternal,l as isDisplaySource,A as isOriginalExternal,y as sourceIsOnService};\n"],"names":["a","t","r","e","s","i","o","l","p","m","y","h","n","g","b","N","A"],"mappings":"0GAIiQ,MAAMA,CAAC,CAAC,YAAYC,EAAEC,EAAEC,EAAE,CAAC,KAAK,UAAUF,EAAE,KAAK,cAAcC,EAAE,KAAK,MAAMC,CAAC,CAAC,OAAOF,EAAE,CAAC,OAAO,OAAOA,GAAG,KAAK,YAAYA,EAAE,WAAW,KAAK,gBAAgBA,EAAE,eAAeC,EAAE,KAAK,MAAMD,EAAE,MAAO,CAACA,EAAEC,IAAID,EAAE,OAAOC,CAAC,EAAG,CAAC,YAAYD,EAAE,CAAC,OAAO,KAAK,MAAM,MAAOC,GAAGA,EAAE,YAAYD,CAAC,EAAG,CAAC,UAAU,CAAC,IAAIA,EAAE,GAAG,UAAUC,KAAK,KAAK,MAAMD,GAAGC,EAAE,SAAS,OAAOD,CAAC,CAAC,MAAM,OAAOA,EAAE,CAAC,KAAK,CAAC,MAAMC,CAAC,EAAE,KAAK,GAAOA,EAAE,SAAN,EAAa,OAAOA,EAAE,CAAC,EAAE,OAAOD,CAAC,EAAE,MAAMG,EAAE,MAAM,QAAQ,IAAIF,EAAE,IAAKA,GAAGA,EAAE,OAAOD,CAAC,CAAC,CAAE,EAAE,OAAOE,EAAEF,CAAC,EAAE,IAAI,KAAKG,CAAC,CAAC,CAAC,CAAC,MAAMC,CAAC,CAAC,YAAYJ,EAAEC,EAAE,CAAC,KAAK,QAAQD,EAAE,KAAK,SAASC,CAAC,CAAC,OAAOD,EAAE,CAAC,OAAO,OAAOA,GAAG,KAAK,UAAUA,EAAE,SAAS,KAAK,WAAWA,EAAE,QAAQ,CAAC,YAAYA,EAAE,CAAC,OAAO,KAAK,QAAQ,WAAW,GAAGA,EAAE,IAAI,UAAU,CAAC,CAAC,MAAM,OAAO,EAAE,CAAC,KAAK,CAAC,KAAKG,CAAC,EAAE,MAAMH,EAAE,KAAK,QAAQ,CAAC,aAAa,MAAM,CAAC,EAAE,OAAOE,EAAE,CAAC,EAAEC,CAAC,CAAC,CAAC,SAASE,EAAEL,EAAE,CAAC,OAAOM,EAAEN,GAAA,YAAAA,EAAG,MAAM,CAAC,CAAC,SAAS,EAAEA,EAAE,CAAC,OAAI,MAAM,QAAQA,CAAC,EAAkBA,EAAE,MAAOA,GAAGA,aAAaD,CAAC,EAApC,EAAsC,CAAC,MAAM,EAAE,6CAA6C,EAAE,gBAAgB,SAASO,EAAEN,EAAE,CAAC,OAAIA,EAAc,MAAM,QAAQA,CAAC,EAAUA,EAAE,KAAKO,CAAC,EAASA,EAAEP,CAAC,IAAC,CAAC,SAASO,EAAEP,EAAE,CAAC,GAAGA,aAAa,KAAK,CAAC,KAAK,CAAC,KAAK,EAAE,KAAKE,CAAC,EAAEF,EAAE,OAAO,EAAE,KAAK,CAAC,GAAG,EAAE,KAAKE,CAAC,CAAC,CAAC,OAAO,EAAE,KAAKF,EAAE,aAAa,GAAG,EAAE,KAAKA,EAAE,SAAS,CAAC,CAAC,SAASQ,EAAER,EAAE,EAAE,CAAC,GAAG,CAACA,EAAE,SAAS,KAAK,CAAC,OAAOE,CAAC,EAAEF,EAAE,OAAOS,EAAEP,EAAE,CAAC,CAAC,CAAC,SAASQ,EAAEV,EAAE,EAAE,CAAC,GAAGA,IAAI,EAAE,MAAM,GAAG,KAAK,CAAC,OAAOE,CAAC,EAAEF,EAAE,CAAC,OAAOG,CAAC,EAAE,EAAE,GAAGD,IAAIC,EAAE,SAAS,GAAG,EAAED,CAAC,GAAG,EAAEC,CAAC,EAAE,CAAC,GAAGD,EAAE,SAASC,EAAE,OAAO,SAAS,MAAMH,EAAE,CAACA,EAAEC,IAAID,EAAE,UAAUC,EAAE,UAAU,GAAGD,EAAE,UAAUC,EAAE,UAAU,EAAE,EAAEA,EAAE,CAAC,GAAGC,CAAC,EAAE,KAAKF,CAAC,EAAEW,EAAE,CAAC,GAAGR,CAAC,EAAE,KAAKH,CAAC,EAAE,QAAQE,EAAE,EAAEA,EAAED,EAAE,OAAO,EAAEC,EAAE,GAAG,CAACD,EAAEC,CAAC,EAAE,OAAOS,EAAET,CAAC,CAAC,EAAE,MAAM,GAAG,MAAM,EAAE,CAAC,MAAM,EAAE,CAAC,SAASO,EAAET,EAAE,EAAE,CAAC,GAAG,MAAM,QAAQA,CAAC,EAAE,CAAC,MAAME,EAAEF,EAAE,OAAOE,EAAE,OAAO,GAAGA,EAAE,MAAO,GAAGU,EAAE,EAAE,CAAC,CAAC,CAAE,CAAC,OAAOA,EAAEZ,EAAE,CAAC,CAAC,CAAC,SAASY,EAAEZ,EAAE,EAAE,CAAC,OAAOA,aAAaD,GAAGC,EAAE,YAAY,CAAC,CAAC,CAAC,SAASa,EAAEb,EAAE,EAAE,CAAC,OAAOA,aAAa,KAAKG,EAAEH,EAAE,CAAC,EAAEW,EAAEX,EAAE,cAAcA,EAAE,UAAU,CAAC,CAAC,CAAC,SAASc,EAAEd,EAAE,CAAC,OAAO,MAAM,QAAQA,CAAC,EAAEA,EAAE,CAACA,CAAC,CAAC,CAAC,SAASe,EAAEf,EAAE,CAAC,MAAM,CAAC,CAACA,EAAE,QAAQ","x_google_ignoreList":[0]}