{"version":3,"mappings":"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","names":["i","a","l","c","h","d","m","p","s","u","e","o","t","r","n","f","y","w","g","b","_a","_b","j","k","L","x","z","v","U","S","C","E","M","__vitePreload","O","R","D","I","N"],"ignoreList":[0,1],"sources":["../../node_modules/@arcgis/core/symbols/support/gfxUtils.js","../../node_modules/@arcgis/core/symbols/support/utils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{getAssetUrl as t}from\"../../assets.js\";import e from\"../../Color.js\";import o from\"../../request.js\";import{LRUCache as s}from\"../../core/LRUCache.js\";import{pt2px as r}from\"../../core/screenUtils.js\";import{getCIMSymbolColor as n}from\"./cimSymbolUtils.js\";const i=\"picture-fill\",a=\"simple-fill\",l=\"simple-line\",c=\"simple-marker\",h=\"text\",d=\"cim\",m=new Map([[\"dash\",[4,3]],[\"dashdot\",[4,3,1,3]],[\"dot\",[1,3]],[\"longdash\",[8,3]],[\"longdashdot\",[8,3,1,3]],[\"longdashdotdot\",[8,3,1,3,1,3]],[\"shortdash\",[4,1]],[\"shortdashdot\",[4,1,1,1]],[\"shortdashdotdot\",[4,1,1,1,1,1]],[\"shortdot\",[1,1]],[\"solid\",[]]]),p=new s(1e3);function u(e){const o=e.style;let s=null;if(e)switch(e.type){case c:\"cross\"!==o&&\"x\"!==o&&(s=e.color);break;case a:o&&\"solid\"!==o?\"none\"!==o&&(s={type:\"pattern\",x:0,y:0,src:t(`esri/symbols/patterns/${o}.png`),width:5,height:5}):s=e.color;break;case i:s={type:\"pattern\",src:e.url,width:r(e.width)*e.xscale,height:r(e.height)*e.yscale,x:r(e.xoffset),y:r(e.yoffset)};break;case h:s=e.color;break;case d:s=n(e)}return s}function f(t,e){const s=t+\"-\"+e;return void 0!==p.get(s)?Promise.resolve(p.get(s)):o(t,{responseType:\"image\"}).then((t=>{const o=t.data,r=o.naturalWidth,n=o.naturalHeight,i=document.createElement(\"canvas\");i.width=r,i.height=n;const a=i.getContext(\"2d\");a.fillStyle=e,a.fillRect(0,0,r,n),a.globalCompositeOperation=\"destination-in\",a.drawImage(o,0,0);const l=i.toDataURL();return p.put(s,l),l}))}function y(t){if(!t)return null;let e=null;switch(t.type){case a:case i:case c:e=y(t.outline);break;case l:{const o=r(t.width);null!=t.style&&\"none\"!==t.style&&0!==o&&(e={color:t.color,style:w(t.style),width:o,cap:t.cap,join:\"miter\"===t.join?r(t.miterLimit):t.join},e.dashArray=g(e).join(\",\")||\"none\");break}default:e=null}return e}function g(t){if(!t?.style)return[];const{dashArray:e,style:o,width:s}=t;if(\"string\"==typeof e&&\"none\"!==e)return e.split(\",\").map((t=>Number(t)));const r=s??0,n=m.has(o)?m.get(o).map((t=>t*r)):[];if(\"butt\"!==t.cap)for(const[i,a]of n.entries())n[i]=i%2==1?a+r:Math.max(a-r,1);return n}const w=(()=>{const t={};return e=>{if(t[e])return t[e];const o=e.replaceAll(\"-\",\"\");return t[e]=o,o}})(),b=new e([128,128,128]);export{b as defaultThematicColor,w as dekebabifyLineStyle,g as getDashArray,u as getFill,f as getPatternUrlWithColor,y as getStroke};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport e from\"../../Color.js\";import{isSymbol3D as t,isSymbol2D as o}from\"../../symbols.js\";import{forEach as r}from\"../../core/asyncUtils.js\";import\"../../core/has.js\";import{px2pt as n}from\"../../core/screenUtils.js\";import{ONES as l}from\"../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{effectFunctionsFromJSON as i}from\"../../layers/effects/jsonUtils.js\";import{getCIMSymbolColor as c}from\"./cimSymbolUtils.js\";import{getStroke as s}from\"./gfxUtils.js\";import{Symbol3DMaterial as u}from\"./Symbol3DMaterial.js\";const a=new e(\"white\");function f(e){const t=e.symbolLayers?.at(-1);if(t&&\"outline\"in t)return t?.outline?.size}function m(e){if(!e)return 0;if(t(e)){const t=f(e);return null!=t?t:0}return n(s(e)?.width)}function y(e){if(null==e||!(\"symbolLayers\"in e)||null==e.symbolLayers)return!1;switch(e.type){case\"point-3d\":return e.symbolLayers.some((e=>\"object\"===e.type));case\"line-3d\":return e.symbolLayers.some((e=>\"path\"===e.type));case\"polygon-3d\":return e.symbolLayers.some((e=>\"object\"===e.type||\"extrude\"===e.type));default:return!1}}function p(e){return e.resource?.href??\"\"}function h(r,n){if(!r)return null;let l=null;return t(r)?l=b(r):o(r)&&(l=\"cim\"===r.type?c(r):r.color?new e(r.color):null),l?w(l,n):null}function b(t){const o=t.symbolLayers;if(!o)return null;let r=null;return o.forEach((e=>{\"object\"===e.type&&e.resource?.href||(r=\"water\"===e.type?e.color:e.material?e.material.color:null)})),r?new e(r):null}function w(t,o){if(null==o||null==t)return t;const r=t.toRgba();return r[3]=r[3]*o,new e(r)}function d(e,t,o){const r=e.symbolLayers;if(!r)return;const n=e=>w(t=t??e??(null!=o?a:null),o);r.forEach((e=>{if(\"object\"!==e.type||!e.resource?.href||t)if(\"water\"===e.type)e.color=n(e.color);else{const t=null!=e.material?e.material.color:null,r=n(t);null==e.material?e.material=new u({color:r}):e.material.color=r,null!=o&&\"outline\"in e&&null!=e.outline?.color&&(e.outline.color=w(e.outline.color,o))}}))}function j(e,t,o){(t=t??e.color)&&(e.color=w(t,o)),null!=o&&\"outline\"in e&&e.outline?.color&&(e.outline.color=w(e.outline.color,o))}function g(r,n,l){r&&(n||null!=l)&&(n&&(n=new e(n)),t(r)?d(r,n,l):o(r)&&j(r,n,l))}async function k(e,t){const o=e.symbolLayers;o&&await r(o,(async e=>L(e,t)))}async function L(e,t){switch(e.type){case\"extrude\":x(e,t);break;case\"icon\":case\"line\":case\"text\":z(e,t);break;case\"path\":v(e,t);break;case\"object\":await U(e,t)}}function z(e,t){const o=S(t);null!=o&&(e.size=o)}function S(e){for(const t of e)if(\"number\"==typeof t)return t;return null}function x(e,t){e.size=\"number\"==typeof t[2]?t[2]:0}async function U(e,t){const{resourceSize:o,symbolSize:r}=await C(e),n=E(t,o,r);e.width=M(t[0],r[0],o[0],n),e.depth=M(t[1],r[1],o[1],n),e.height=M(t[2],r[2],o[2],n)}function v(e,t){const o=E(t,l,[e.width,void 0,e.height]);e.width=M(t[0],e.width,1,o),e.height=M(t[2],e.height,1,o)}function E(e,t,o){for(let r=0;r<3;r++){const n=e[r];switch(n){case\"symbol-value\":{const e=o[r];return null!=e?e/t[r]:1}case\"proportional\":break;default:if(n&&t[r])return n/t[r]}}return 1}async function C(e){const{computeObjectLayerResourceSize:t}=await import(\"./symbolLayerUtils.js\"),o=await t(e,10),{width:r,height:n,depth:l}=e,i=[r,l,n];let c=1;for(let s=0;s<3;s++){const e=i[s];if(null!=e){c=e/o[s];break}}for(let s=0;s<3;s++)null==i[s]&&(i[s]=o[s]*c);return{resourceSize:o,symbolSize:i}}function M(e,t,o,r){switch(e){case\"proportional\":return o*r;case\"symbol-value\":return null!=t?t:o;default:return e}}function O(e,t){const o=S(t);if(null!=o)switch(e.type){case\"simple-marker\":e.size=o;break;case\"picture-marker\":{const t=e.width/e.height;t>1?(e.width=o,e.height=o*t):(e.width=o*t,e.height=o);break}case\"simple-line\":e.width=o;break;case\"text\":e.font.size=o}}async function R(e,r){if(e&&r)return t(e)?k(e,r):void(o(e)&&O(e,r))}function D(e,r,n){if(e&&null!=r)if(t(e)){const t=e.symbolLayers;t&&t.forEach((e=>{if(\"object\"===e.type)switch(n){case\"tilt\":e.tilt=(e.tilt??0)+r;break;case\"roll\":e.roll=(e.roll??0)+r;break;default:e.heading=(e.heading??0)+r}\"icon\"===e.type&&(e.angle+=r)}))}else o(e)&&(\"simple-marker\"!==e.type&&\"picture-marker\"!==e.type&&\"text\"!==e.type||(e.angle+=r))}function I(e){if(!e)return null;const t=e.effects.filter((e=>\"bloom\"!==e.type)).map((e=>e.toJSON()));return i(t)}function J(e){return null!=e&&\"polygon-3d\"===e.type&&e.symbolLayers.some((e=>\"extrude\"===e.type))}async function N(e,t){const o=await e.fetchSymbol(t);return o||e.fetchCIMSymbol(t)}export{g as applyColorToSymbol,w as applyOpacityToColor,D as applyRotationToSymbol,R as applySizesToSymbol,N as fetchWebStyleSymbol,I as getCSSFilterFromEffectList,h as getColorFromSymbol,p as getIconHref,m as getSymbolOutlineSize,y as isVolumetricSymbol,J as symbolHasExtrudeSymbolLayer};\n"],"file":"assets/utils-D-fEzv4k.js"}