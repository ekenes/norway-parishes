import{o as v}from"./floatRGBA-DE1VP_4t.js";import{ds as y}from"./index-Club40b3.js";import{t as F,c as C,o as b}from"./constants-F8oTIn7N.js";const A=r=>r==="vertical"||r==="horizontal"||r==="cross"||r==="esriSFSCross"||r==="esriSFSVertical"||r==="esriSFSHorizontal";function z(r,M,d){const n=M.style,h=y(Math.ceil(d)),t=A(n)?8*h:16*h,o=2*h;r.width=t,r.height=t;const a=r.getContext("2d");a.strokeStyle="#ffffff",a.lineWidth=h,a.beginPath(),n!=="vertical"&&n!=="cross"&&n!=="esriSFSCross"&&n!=="esriSFSVertical"||(a.moveTo(t/2,-o),a.lineTo(t/2,t+o)),n!=="horizontal"&&n!=="cross"&&n!=="esriSFSCross"&&n!=="esriSFSHorizontal"||(a.moveTo(-o,t/2),a.lineTo(t+o,t/2)),n!=="backward-diagonal"&&n!=="diagonal-cross"&&n!=="esriSFSDiagonalCross"&&n!=="esriSFSBackwardDiagonal"||(a.moveTo(-o,-o),a.lineTo(t+o,t+o),a.moveTo(t-o,-o),a.lineTo(t+o,o),a.moveTo(-o,t-o),a.lineTo(o,t+o)),n!=="forward-diagonal"&&n!=="diagonal-cross"&&n!=="esriSFSForwardDiagonal"&&n!=="esriSFSDiagonalCross"||(a.moveTo(t+o,-o),a.lineTo(-o,t+o),a.moveTo(o,-o),a.lineTo(-o,o),a.moveTo(t+o,t-o),a.lineTo(t-o,t+o)),a.stroke();const m=a.getImageData(0,0,r.width,r.height),i=new Uint8Array(m.data);let c;for(let e=0;e<i.length;e+=4)c=i[e+3]/255,i[e]=i[e]*c,i[e+1]=i[e+1]*c,i[e+2]=i[e+2]*c;return[i,r.width,r.height,h]}function U(r){r.length%2==1&&(r=[...r,...r]);const M=r.reduce((e,l)=>e+l,0),d=Math.round(M*F),n=1,h=new Float32Array(d*n);let t=0,o=0,a=.5,m=!0;for(const e of r){for(t=o,o+=e*F;a<=o;){const l=a-.5,s=Math.min(Math.abs(a-t),Math.abs(a-o));h[l]=m?-s:s,a++}m=!m}const i=h.length,c=new Uint8Array(4*i);for(let e=0;e<i;++e){const l=h[e]/F;v(l/C*.5+.5,c,4*e)}return[c,d,n]}function q(r,M){r==null&&(r=[]);const d=M==="Butt",n=M==="Square",h=!d&&!n;r.length%2==1&&(r=[...r,...r]);const t=b,o=2*t;let a=0;for(const f of r)a+=f;const m=Math.round(a*t),i=new Float32Array(m*o),c=.5*t;let e=0,l=0,s=.5,T=!0;for(const f of r){for(e=l,l+=f*t;s<=l;){let g=.5;for(;g<o;){const x=(g-.5)*m+s-.5,S=h?(g-t)*(g-t):Math.abs(g-t);i[x]=T?d?Math.max(Math.max(e+c-s,S),Math.max(s-l+c,S)):S:h?Math.min((s-e)*(s-e)+S,(s-l)*(s-l)+S):n?Math.min(Math.max(s-e,S),Math.max(l-s,S)):Math.min(Math.max(s-e+c,S),Math.max(l+c-s,S)),g++}s++}T=!T}const u=i.length,w=new Uint8Array(4*u);for(let f=0;f<u;++f){const g=(h?Math.sqrt(i[f]):i[f])/t;v(g,w,4*f)}return[w,m,o]}export{U as i,q as l,z as s};
//# sourceMappingURL=rasterizingUtils-CaQ8S7o3.js.map
