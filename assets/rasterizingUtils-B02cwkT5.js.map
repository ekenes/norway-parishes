{"version":3,"file":"rasterizingUtils-B02cwkT5.js","sources":["../../node_modules/@arcgis/core/symbols/cim/rasterizingUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{packFloatRGBA as o}from\"../../core/floatRGBA.js\";import{nextPowerOfTwo as t}from\"../../core/mathUtils.js\";import{dashSdfRasterizationScale as r,dashSdfDistanceNormalization as a,dashRadius as e}from\"./constants.js\";const n=o=>\"vertical\"===o||\"horizontal\"===o||\"cross\"===o||\"esriSFSCross\"===o||\"esriSFSVertical\"===o||\"esriSFSHorizontal\"===o;function s(o,r,a){const e=r.style,s=t(Math.ceil(a)),i=n(e)?8*s:16*s,l=2*s;o.width=i,o.height=i;const h=o.getContext(\"2d\");h.strokeStyle=\"#ffffff\",h.lineWidth=s,h.beginPath(),\"vertical\"!==e&&\"cross\"!==e&&\"esriSFSCross\"!==e&&\"esriSFSVertical\"!==e||(h.moveTo(i/2,-l),h.lineTo(i/2,i+l)),\"horizontal\"!==e&&\"cross\"!==e&&\"esriSFSCross\"!==e&&\"esriSFSHorizontal\"!==e||(h.moveTo(-l,i/2),h.lineTo(i+l,i/2)),\"backward-diagonal\"!==e&&\"diagonal-cross\"!==e&&\"esriSFSDiagonalCross\"!==e&&\"esriSFSBackwardDiagonal\"!==e||(h.moveTo(-l,-l),h.lineTo(i+l,i+l),h.moveTo(i-l,-l),h.lineTo(i+l,l),h.moveTo(-l,i-l),h.lineTo(l,i+l)),\"forward-diagonal\"!==e&&\"diagonal-cross\"!==e&&\"esriSFSForwardDiagonal\"!==e&&\"esriSFSDiagonalCross\"!==e||(h.moveTo(i+l,-l),h.lineTo(-l,i+l),h.moveTo(l,-l),h.lineTo(-l,l),h.moveTo(i+l,i-l),h.lineTo(i-l,i+l)),h.stroke();const c=h.getImageData(0,0,o.width,o.height),m=new Uint8Array(c.data);let f;for(let t=0;t<m.length;t+=4)f=m[t+3]/255,m[t]=m[t]*f,m[t+1]=m[t+1]*f,m[t+2]=m[t+2]*f;return[m,o.width,o.height,s]}function i(t){t.length%2==1&&(t=[...t,...t]);const e=t.reduce(((o,t)=>o+t),0),n=Math.round(e*r),s=1,i=new Float32Array(n*s);let l=0,h=0,c=.5,m=!0;for(const o of t){for(l=h,h+=o*r;c<=h;){const o=c-.5,t=Math.min(Math.abs(c-l),Math.abs(c-h));i[o]=m?-t:t,c++}m=!m}const f=i.length,S=new Uint8Array(4*f);for(let g=0;g<f;++g){const t=i[g]/r;o(t/a*.5+.5,S,4*g)}return[S,n,s]}function l(t,r){null==t&&(t=[]);const a=\"Butt\"===r,n=\"Square\"===r,s=!a&&!n;t.length%2==1&&(t=[...t,...t]);const i=e,l=2*i;let h=0;for(const o of t)h+=o;const c=Math.round(h*i),m=new Float32Array(c*l),f=.5*i;let S=0,g=0,M=.5,d=!0;for(const o of t){for(S=g,g+=o*i;M<=g;){let o=.5;for(;o<l;){const t=(o-.5)*c+M-.5,r=s?(o-i)*(o-i):Math.abs(o-i);m[t]=d?a?Math.max(Math.max(S+f-M,r),Math.max(M-g+f,r)):r:s?Math.min((M-S)*(M-S)+r,(M-g)*(M-g)+r):n?Math.min(Math.max(M-S,r),Math.max(g-M,r)):Math.min(Math.max(M-S+f,r),Math.max(g+f-M,r)),o++}M++}d=!d}const T=m.length,F=new Uint8Array(4*T);for(let e=0;e<T;++e){const t=(s?Math.sqrt(m[e]):m[e])/i;o(t,F,4*e)}return[F,c,l]}export{l as rasterizeDash,i as rasterizeDash1D,s as rasterizeFillStyle};\n"],"names":["n","o","s","r","a","e","t","i","l","h","c","m","f","S","g","M","d","T","F"],"mappings":"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","x_google_ignoreList":[0]}