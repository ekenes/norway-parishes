{"version":3,"file":"calcite-table-row.entry-BmD98By9.js","sources":["../../node_modules/@esri/calcite-components/dist/esm/calcite-table-row.entry.js"],"sourcesContent":["/*!\n * All material copyright ESRI, All Rights Reserved, unless otherwise specified.\n * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.\n * v2.13.2\n */\nimport { r as registerInstance, c as createEvent, h, H as Host, g as getElement } from './index-abe3b66e.js';\nimport { k as focusElementInGroup, t as toAriaBoolean } from './dom-b6dedd88.js';\nimport { i as isActivationKey } from './key-3ee05994.js';\nimport { u as updateHostInteraction, I as InteractiveContainer } from './interactive-1a42577a.js';\nimport { g as getIconScale } from './component-5f0a8be8.js';\nimport './guid-9c230b6a.js';\nimport './resources-a23d2491.js';\n\nconst CSS = {\n    lastVisibleRow: \"last-visible-row\",\n};\n\nconst tableRowCss = \":host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{--calcite-internal-table-row-background:var(--calcite-table-row-background, var(--calcite-color-foreground-1));--calcite-internal-table-row-border-color:var(--calcite-table-row-border-color, transparent);display:contents}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) tr{pointer-events:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}tr{border-block-end:1px solid var(--calcite-internal-table-row-border-color);background-color:var(--calcite-internal-table-row-background)}tr.last-visible-row{border-block-end:0}\";\nconst CalciteTableRowStyle0 = tableRowCss;\n\nconst TableRow = class {\n    constructor(hostRef) {\n        registerInstance(this, hostRef);\n        this.calciteTableRowSelect = createEvent(this, \"calciteTableRowSelect\", 6);\n        this.calciteInternalTableRowFocusRequest = createEvent(this, \"calciteInternalTableRowFocusRequest\", 6);\n        this.rowCells = [];\n        //--------------------------------------------------------------------------\n        //\n        //  Private Methods\n        //\n        //--------------------------------------------------------------------------\n        this.keyDownHandler = (event) => {\n            if (this.interactionMode !== \"interactive\") {\n                return;\n            }\n            const el = event.target;\n            const key = event.key;\n            const isControl = event.ctrlKey;\n            const cells = this.rowCells;\n            if (el.matches(\"calcite-table-cell\") || el.matches(\"calcite-table-header\")) {\n                switch (key) {\n                    case \"ArrowUp\":\n                        this.emitTableRowFocusRequest(el.positionInRow, this.positionAll, \"previous\");\n                        event.preventDefault();\n                        break;\n                    case \"ArrowDown\":\n                        this.emitTableRowFocusRequest(el.positionInRow, this.positionAll, \"next\");\n                        event.preventDefault();\n                        break;\n                    case \"PageUp\":\n                        this.emitTableRowFocusRequest(el.positionInRow, this.positionAll, \"first\");\n                        event.preventDefault();\n                        break;\n                    case \"PageDown\":\n                        this.emitTableRowFocusRequest(el.positionInRow, this.positionAll, \"last\");\n                        event.preventDefault();\n                        break;\n                    case \"ArrowLeft\":\n                        focusElementInGroup(cells, el, \"previous\", false);\n                        event.preventDefault();\n                        break;\n                    case \"ArrowRight\":\n                        focusElementInGroup(cells, el, \"next\", false);\n                        event.preventDefault();\n                        break;\n                    case \"Home\":\n                        if (isControl) {\n                            this.emitTableRowFocusRequest(1, this.positionAll, \"first\");\n                            event.preventDefault();\n                        }\n                        else {\n                            focusElementInGroup(cells, el, \"first\", false);\n                            event.preventDefault();\n                        }\n                        break;\n                    case \"End\":\n                        if (isControl) {\n                            this.emitTableRowFocusRequest(this.rowCells?.length, this.positionAll, \"last\", true);\n                            event.preventDefault();\n                        }\n                        else {\n                            focusElementInGroup(cells, el, \"last\", false);\n                            event.preventDefault();\n                        }\n                        break;\n                }\n            }\n        };\n        this.emitTableRowFocusRequest = (cellPosition, rowPosition, destination, lastCell) => {\n            this.calciteInternalTableRowFocusRequest.emit({\n                cellPosition,\n                rowPosition,\n                destination,\n                lastCell,\n            });\n        };\n        this.updateCells = () => {\n            const alignment = this.alignment\n                ? this.alignment\n                : this.rowType !== \"head\"\n                    ? \"center\"\n                    : \"start\";\n            const slottedCells = this.tableRowSlotEl\n                ?.assignedElements({ flatten: true })\n                ?.filter((el) => el.matches(\"calcite-table-cell\") || el.matches(\"calcite-table-header\"));\n            const renderedCells = Array.from(this.tableRowEl?.querySelectorAll(\"calcite-table-header, calcite-table-cell\"))?.filter((el) => el.numberCell || el.selectionCell);\n            const cells = renderedCells ? renderedCells.concat(slottedCells) : slottedCells;\n            if (cells.length > 0) {\n                cells?.forEach((cell, index) => {\n                    cell.interactionMode = this.interactionMode;\n                    cell.lastCell = index === cells.length - 1;\n                    cell.parentRowAlignment = alignment;\n                    cell.parentRowIsSelected = this.selected;\n                    cell.parentRowType = this.rowType;\n                    cell.positionInRow = index + 1;\n                    cell.scale = this.scale;\n                    if (cell.nodeName === \"CALCITE-TABLE-CELL\") {\n                        cell.readCellContentsToAT = this.readCellContentsToAT;\n                        cell.disabled = this.disabled;\n                    }\n                });\n            }\n            this.rowCells =\n                cells || [];\n            this.cellCount = cells?.length;\n        };\n        this.handleSelectionOfRow = () => {\n            this.calciteTableRowSelect.emit();\n        };\n        this.handleKeyboardSelection = (event) => {\n            if (isActivationKey(event.key)) {\n                if (event.key === \" \") {\n                    event.preventDefault();\n                }\n                this.handleSelectionOfRow();\n            }\n        };\n        this.alignment = undefined;\n        this.disabled = false;\n        this.selected = false;\n        this.cellCount = undefined;\n        this.interactionMode = \"interactive\";\n        this.lastVisibleRow = undefined;\n        this.rowType = undefined;\n        this.numbered = false;\n        this.positionSection = undefined;\n        this.positionSectionLocalized = undefined;\n        this.positionAll = undefined;\n        this.readCellContentsToAT = undefined;\n        this.scale = undefined;\n        this.selectionMode = \"none\";\n        this.selectedRowCount = undefined;\n        this.selectedRowCountLocalized = undefined;\n        this.bodyRowCount = undefined;\n        this.effectiveLocale = \"\";\n    }\n    handleCellChanges() {\n        if (this.tableRowEl && this.rowCells.length > 0) {\n            this.updateCells();\n        }\n    }\n    handleDelayedCellChanges() {\n        if (this.tableRowEl && this.rowCells.length > 0) {\n            requestAnimationFrame(() => this.updateCells());\n        }\n    }\n    //--------------------------------------------------------------------------\n    //\n    //  Lifecycle\n    //\n    //--------------------------------------------------------------------------\n    componentDidLoad() {\n        if (this.tableRowEl && this.rowCells.length > 0) {\n            this.updateCells();\n        }\n    }\n    componentDidRender() {\n        updateHostInteraction(this);\n    }\n    //--------------------------------------------------------------------------\n    //\n    //  Event Listeners\n    //\n    //--------------------------------------------------------------------------\n    calciteInternalTableRowFocusChangeHandler(event) {\n        if (event.target.contains(this.el)) {\n            const position = event.detail.cellPosition;\n            const rowPosition = event.detail.rowPosition;\n            const destination = event.detail.destination;\n            const lastCell = event.detail.lastCell;\n            if (rowPosition === this.positionAll) {\n                if (this.disabled) {\n                    const deflectDirection = destination === \"last\" ? \"previous\" : destination === \"first\" ? \"next\" : destination;\n                    this.emitTableRowFocusRequest(position, this.positionAll, deflectDirection);\n                    return;\n                }\n                const cellPosition = lastCell\n                    ? this.rowCells[this.rowCells.length - 1]\n                    : this.rowCells?.find((_, index) => index + 1 === position);\n                if (cellPosition) {\n                    cellPosition.setFocus();\n                }\n            }\n        }\n    }\n    //--------------------------------------------------------------------------\n    //\n    //  Render Methods\n    //\n    //--------------------------------------------------------------------------\n    renderSelectionIcon() {\n        const icon = this.selectionMode === \"multiple\" && this.selected\n            ? \"check-square-f\"\n            : this.selectionMode === \"multiple\"\n                ? \"square\"\n                : this.selected\n                    ? \"circle-f\"\n                    : \"circle\";\n        return h(\"calcite-icon\", { icon: icon, scale: getIconScale(this.scale) });\n    }\n    renderSelectableCell() {\n        return this.rowType === \"head\" ? (h(\"calcite-table-header\", { alignment: \"center\", bodyRowCount: this.bodyRowCount, key: \"selection-head\", onClick: this.selectionMode === \"multiple\" && this.handleSelectionOfRow, onKeyDown: this.selectionMode === \"multiple\" && this.handleKeyboardSelection, parentRowAlignment: this.alignment, selectedRowCount: this.selectedRowCount, selectedRowCountLocalized: this.selectedRowCountLocalized, selectionCell: true, selectionMode: this.selectionMode })) : this.rowType === \"body\" ? (h(\"calcite-table-cell\", { alignment: \"center\", key: \"selection-body\", onClick: this.handleSelectionOfRow, onKeyDown: this.handleKeyboardSelection, parentRowAlignment: this.alignment, parentRowIsSelected: this.selected, parentRowPositionLocalized: this.positionSectionLocalized, selectionCell: true }, this.renderSelectionIcon())) : (h(\"calcite-table-cell\", { alignment: \"center\", key: \"selection-foot\", parentRowAlignment: this.alignment, selectionCell: true }));\n    }\n    renderNumberedCell() {\n        return this.rowType === \"head\" ? (h(\"calcite-table-header\", { alignment: \"center\", key: \"numbered-head\", numberCell: true, parentRowAlignment: this.alignment })) : this.rowType === \"body\" ? (h(\"calcite-table-cell\", { alignment: \"center\", key: \"numbered-body\", numberCell: true, parentRowAlignment: this.alignment }, this.positionSectionLocalized)) : (h(\"calcite-table-cell\", { alignment: \"center\", key: \"numbered-foot\", numberCell: true, parentRowAlignment: this.alignment }));\n    }\n    render() {\n        return (h(Host, { key: 'fa3f14c832e7ed178ea338b01baebbe9a578689d' }, h(InteractiveContainer, { key: 'c82f005db0a6247e45476c86d2eaefe698df2dd1', disabled: this.disabled }, h(\"tr\", { key: '452064805aa9685b75f3715bd45c42ce41f88368', \"aria-rowindex\": this.positionAll + 1, \"aria-selected\": toAriaBoolean(this.selected), class: { [CSS.lastVisibleRow]: this.lastVisibleRow }, onKeyDown: this.keyDownHandler, ref: (el) => (this.tableRowEl = el) }, this.numbered && this.renderNumberedCell(), this.selectionMode !== \"none\" && this.renderSelectableCell(), h(\"slot\", { key: 'bddf927a3129b20012ade6aa5415afcdeb8064a1', onSlotchange: this.updateCells, ref: (el) => (this.tableRowSlotEl = el) })))));\n    }\n    get el() { return getElement(this); }\n    static get watchers() { return {\n        \"bodyRowCount\": [\"handleCellChanges\"],\n        \"scale\": [\"handleCellChanges\"],\n        \"selected\": [\"handleCellChanges\"],\n        \"selectedRowCount\": [\"handleCellChanges\"],\n        \"interactionMode\": [\"handleCellChanges\"],\n        \"numbered\": [\"handleDelayedCellChanges\"],\n        \"selectionMode\": [\"handleDelayedCellChanges\"]\n    }; }\n};\nTableRow.style = CalciteTableRowStyle0;\n\nexport { TableRow as calcite_table_row };\n\n//# sourceMappingURL=calcite-table-row.entry.js.map"],"names":["CSS","tableRowCss","CalciteTableRowStyle0","TableRow","hostRef","registerInstance","createEvent","event","el","key","isControl","cells","focusElementInGroup","_a","cellPosition","rowPosition","destination","lastCell","alignment","slottedCells","_b","renderedCells","_d","_c","cell","index","isActivationKey","updateHostInteraction","position","deflectDirection","_","icon","h","getIconScale","Host","InteractiveContainer","toAriaBoolean","getElement"],"mappings":"2TAAA;AAAA;AAAA;AAAA;AAAA,GAaA,MAAMA,EAAM,CACR,eAAgB,kBACpB,EAEMC,EAAc,i3BACdC,EAAwBD,EAExBE,EAAW,KAAM,CACnB,YAAYC,EAAS,CACjBC,EAAiB,KAAMD,CAAO,EAC9B,KAAK,sBAAwBE,EAAY,KAAM,wBAAyB,CAAC,EACzE,KAAK,oCAAsCA,EAAY,KAAM,sCAAuC,CAAC,EACrG,KAAK,SAAW,CAAE,EAMlB,KAAK,eAAkBC,GAAU,OAC7B,GAAI,KAAK,kBAAoB,cACzB,OAEJ,MAAMC,EAAKD,EAAM,OACXE,EAAMF,EAAM,IACZG,EAAYH,EAAM,QAClBI,EAAQ,KAAK,SACnB,GAAIH,EAAG,QAAQ,oBAAoB,GAAKA,EAAG,QAAQ,sBAAsB,EACrE,OAAQC,EAAG,CACP,IAAK,UACD,KAAK,yBAAyBD,EAAG,cAAe,KAAK,YAAa,UAAU,EAC5ED,EAAM,eAAgB,EACtB,MACJ,IAAK,YACD,KAAK,yBAAyBC,EAAG,cAAe,KAAK,YAAa,MAAM,EACxED,EAAM,eAAgB,EACtB,MACJ,IAAK,SACD,KAAK,yBAAyBC,EAAG,cAAe,KAAK,YAAa,OAAO,EACzED,EAAM,eAAgB,EACtB,MACJ,IAAK,WACD,KAAK,yBAAyBC,EAAG,cAAe,KAAK,YAAa,MAAM,EACxED,EAAM,eAAgB,EACtB,MACJ,IAAK,YACDK,EAAoBD,EAAOH,EAAI,WAAY,EAAK,EAChDD,EAAM,eAAgB,EACtB,MACJ,IAAK,aACDK,EAAoBD,EAAOH,EAAI,OAAQ,EAAK,EAC5CD,EAAM,eAAgB,EACtB,MACJ,IAAK,OACGG,GACA,KAAK,yBAAyB,EAAG,KAAK,YAAa,OAAO,EAC1DH,EAAM,eAAgB,IAGtBK,EAAoBD,EAAOH,EAAI,QAAS,EAAK,EAC7CD,EAAM,eAAgB,GAE1B,MACJ,IAAK,MACGG,GACA,KAAK,0BAAyBG,EAAA,KAAK,WAAL,YAAAA,EAAe,OAAQ,KAAK,YAAa,OAAQ,EAAI,EACnFN,EAAM,eAAgB,IAGtBK,EAAoBD,EAAOH,EAAI,OAAQ,EAAK,EAC5CD,EAAM,eAAgB,GAE1B,KACxB,CAES,EACD,KAAK,yBAA2B,CAACO,EAAcC,EAAaC,EAAaC,IAAa,CAClF,KAAK,oCAAoC,KAAK,CAC1C,aAAAH,EACA,YAAAC,EACA,YAAAC,EACA,SAAAC,CAChB,CAAa,CACJ,EACD,KAAK,YAAc,IAAM,aACrB,MAAMC,EAAY,KAAK,UACjB,KAAK,UACL,KAAK,UAAY,OACb,SACA,QACJC,GAAeC,GAAAP,EAAA,KAAK,iBAAL,YAAAA,EACf,iBAAiB,CAAE,QAAS,EAAM,KADnB,YAAAO,EAEf,OAAQZ,GAAOA,EAAG,QAAQ,oBAAoB,GAAKA,EAAG,QAAQ,sBAAsB,GACpFa,GAAgBC,EAAA,MAAM,MAAKC,EAAA,KAAK,aAAL,YAAAA,EAAiB,iBAAiB,2CAA2C,IAAxF,YAAAD,EAA2F,OAAQd,GAAOA,EAAG,YAAcA,EAAG,eAC9IG,EAAQU,EAAgBA,EAAc,OAAOF,CAAY,EAAIA,EAC/DR,EAAM,OAAS,IACfA,GAAA,MAAAA,EAAO,QAAQ,CAACa,EAAMC,IAAU,CAC5BD,EAAK,gBAAkB,KAAK,gBAC5BA,EAAK,SAAWC,IAAUd,EAAM,OAAS,EACzCa,EAAK,mBAAqBN,EAC1BM,EAAK,oBAAsB,KAAK,SAChCA,EAAK,cAAgB,KAAK,QAC1BA,EAAK,cAAgBC,EAAQ,EAC7BD,EAAK,MAAQ,KAAK,MACdA,EAAK,WAAa,uBAClBA,EAAK,qBAAuB,KAAK,qBACjCA,EAAK,SAAW,KAAK,SAE7C,IAEY,KAAK,SACDb,GAAS,CAAE,EACf,KAAK,UAAYA,GAAA,YAAAA,EAAO,MAC3B,EACD,KAAK,qBAAuB,IAAM,CAC9B,KAAK,sBAAsB,KAAM,CACpC,EACD,KAAK,wBAA2BJ,GAAU,CAClCmB,EAAgBnB,EAAM,GAAG,IACrBA,EAAM,MAAQ,KACdA,EAAM,eAAgB,EAE1B,KAAK,qBAAsB,EAElC,EACD,KAAK,UAAY,OACjB,KAAK,SAAW,GAChB,KAAK,SAAW,GAChB,KAAK,UAAY,OACjB,KAAK,gBAAkB,cACvB,KAAK,eAAiB,OACtB,KAAK,QAAU,OACf,KAAK,SAAW,GAChB,KAAK,gBAAkB,OACvB,KAAK,yBAA2B,OAChC,KAAK,YAAc,OACnB,KAAK,qBAAuB,OAC5B,KAAK,MAAQ,OACb,KAAK,cAAgB,OACrB,KAAK,iBAAmB,OACxB,KAAK,0BAA4B,OACjC,KAAK,aAAe,OACpB,KAAK,gBAAkB,EAC/B,CACI,mBAAoB,CACZ,KAAK,YAAc,KAAK,SAAS,OAAS,GAC1C,KAAK,YAAa,CAE9B,CACI,0BAA2B,CACnB,KAAK,YAAc,KAAK,SAAS,OAAS,GAC1C,sBAAsB,IAAM,KAAK,aAAa,CAE1D,CAMI,kBAAmB,CACX,KAAK,YAAc,KAAK,SAAS,OAAS,GAC1C,KAAK,YAAa,CAE9B,CACI,oBAAqB,CACjBoB,EAAsB,IAAI,CAClC,CAMI,0CAA0CpB,EAAO,OAC7C,GAAIA,EAAM,OAAO,SAAS,KAAK,EAAE,EAAG,CAChC,MAAMqB,EAAWrB,EAAM,OAAO,aACxBQ,EAAcR,EAAM,OAAO,YAC3BS,EAAcT,EAAM,OAAO,YAC3BU,EAAWV,EAAM,OAAO,SAC9B,GAAIQ,IAAgB,KAAK,YAAa,CAClC,GAAI,KAAK,SAAU,CACf,MAAMc,EAAmBb,IAAgB,OAAS,WAAaA,IAAgB,QAAU,OAASA,EAClG,KAAK,yBAAyBY,EAAU,KAAK,YAAaC,CAAgB,EAC1E,MACpB,CACgB,MAAMf,EAAeG,EACf,KAAK,SAAS,KAAK,SAAS,OAAS,CAAC,GACtCJ,EAAA,KAAK,WAAL,YAAAA,EAAe,KAAK,CAACiB,EAAGL,IAAUA,EAAQ,IAAMG,GAClDd,GACAA,EAAa,SAAU,CAE3C,CACA,CACA,CAMI,qBAAsB,CAClB,MAAMiB,EAAO,KAAK,gBAAkB,YAAc,KAAK,SACjD,iBACA,KAAK,gBAAkB,WACnB,SACA,KAAK,SACD,WACA,SACd,OAAOC,EAAE,eAAgB,CAAE,KAAMD,EAAM,MAAOE,EAAa,KAAK,KAAK,EAAG,CAChF,CACI,sBAAuB,CACnB,OAAO,KAAK,UAAY,OAAUD,EAAE,uBAAwB,CAAE,UAAW,SAAU,aAAc,KAAK,aAAc,IAAK,iBAAkB,QAAS,KAAK,gBAAkB,YAAc,KAAK,qBAAsB,UAAW,KAAK,gBAAkB,YAAc,KAAK,wBAAyB,mBAAoB,KAAK,UAAW,iBAAkB,KAAK,iBAAkB,0BAA2B,KAAK,0BAA2B,cAAe,GAAM,cAAe,KAAK,aAAe,CAAA,EAAK,KAAK,UAAY,OAAUA,EAAE,qBAAsB,CAAE,UAAW,SAAU,IAAK,iBAAkB,QAAS,KAAK,qBAAsB,UAAW,KAAK,wBAAyB,mBAAoB,KAAK,UAAW,oBAAqB,KAAK,SAAU,2BAA4B,KAAK,yBAA0B,cAAe,EAAM,EAAE,KAAK,oBAAqB,CAAA,EAAMA,EAAE,qBAAsB,CAAE,UAAW,SAAU,IAAK,iBAAkB,mBAAoB,KAAK,UAAW,cAAe,EAAI,CAAE,CACt9B,CACI,oBAAqB,CACjB,OAAO,KAAK,UAAY,OAAUA,EAAE,uBAAwB,CAAE,UAAW,SAAU,IAAK,gBAAiB,WAAY,GAAM,mBAAoB,KAAK,SAAS,CAAE,EAAK,KAAK,UAAY,OAAUA,EAAE,qBAAsB,CAAE,UAAW,SAAU,IAAK,gBAAiB,WAAY,GAAM,mBAAoB,KAAK,WAAa,KAAK,wBAAwB,EAAMA,EAAE,qBAAsB,CAAE,UAAW,SAAU,IAAK,gBAAiB,WAAY,GAAM,mBAAoB,KAAK,SAAS,CAAE,CACle,CACI,QAAS,CACL,OAAQA,EAAEE,EAAM,CAAE,IAAK,0CAA0C,EAAIF,EAAEG,EAAsB,CAAE,IAAK,2CAA4C,SAAU,KAAK,QAAU,EAAEH,EAAE,KAAM,CAAE,IAAK,2CAA4C,gBAAiB,KAAK,YAAc,EAAG,gBAAiBI,EAAc,KAAK,QAAQ,EAAG,MAAO,CAAE,CAACpC,EAAI,cAAc,EAAG,KAAK,gBAAkB,UAAW,KAAK,eAAgB,IAAMQ,GAAQ,KAAK,WAAaA,CAAG,EAAI,KAAK,UAAY,KAAK,mBAAkB,EAAI,KAAK,gBAAkB,QAAU,KAAK,qBAAoB,EAAIwB,EAAE,OAAQ,CAAE,IAAK,2CAA4C,aAAc,KAAK,YAAa,IAAMxB,GAAQ,KAAK,eAAiBA,CAAG,CAAE,CAAC,CAAC,CAAC,CACprB,CACI,IAAI,IAAK,CAAE,OAAO6B,EAAW,IAAI,CAAE,CACnC,WAAW,UAAW,CAAE,MAAO,CAC3B,aAAgB,CAAC,mBAAmB,EACpC,MAAS,CAAC,mBAAmB,EAC7B,SAAY,CAAC,mBAAmB,EAChC,iBAAoB,CAAC,mBAAmB,EACxC,gBAAmB,CAAC,mBAAmB,EACvC,SAAY,CAAC,0BAA0B,EACvC,cAAiB,CAAC,0BAA0B,CACpD,CAAM,CACN,EACAlC,EAAS,MAAQD","x_google_ignoreList":[0]}