{"version":3,"file":"ExpandToggle-623527ca-BfIlJ3k6.js","sources":["../../node_modules/@esri/calcite-components/dist/esm/ExpandToggle-623527ca.js"],"sourcesContent":["/*!\n * All material copyright ESRI, All Rights Reserved, unless otherwise specified.\n * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.\n * v2.13.2\n */\nimport { f as forceUpdate, h } from './index-abe3b66e.js';\nimport { g as getElementDir } from './dom-b6dedd88.js';\nimport { S as SLOTS$1 } from './resources-c6ed25f3.js';\nimport { S as SLOTS } from './resources-fa285c14.js';\n\nconst groupBufferPx = 2;\nconst getAverage = (arr) => arr.reduce((p, c) => p + c, 0) / arr.length;\nconst geActionDimensions = (actions) => {\n    const actionsNotSlotted = actions.filter((action) => action.slot !== SLOTS$1.menuActions);\n    const actionLen = actionsNotSlotted?.length;\n    return {\n        actionWidth: actionLen ? getAverage(actionsNotSlotted.map((action) => action.clientWidth || 0)) : 0,\n        actionHeight: actionLen ? getAverage(actionsNotSlotted.map((action) => action.clientHeight || 0)) : 0,\n    };\n};\nconst getMaxActionCount = ({ width, actionWidth, layout, height, actionHeight, groupCount, }) => {\n    const maxContainerPx = layout === \"horizontal\" ? width : height;\n    const avgItemPx = layout === \"horizontal\" ? actionWidth : actionHeight;\n    return Math.floor((maxContainerPx - groupCount * groupBufferPx) / avgItemPx);\n};\nconst getOverflowCount = ({ layout, actionCount, actionWidth, width, actionHeight, height, groupCount, }) => {\n    return Math.max(actionCount - getMaxActionCount({ width, actionWidth, layout, height, actionHeight, groupCount }), 0);\n};\nconst queryActions = (el) => {\n    return Array.from(el.querySelectorAll(\"calcite-action\")).filter((action) => action.closest(\"calcite-action-menu\") ? action.slot === SLOTS.trigger : true);\n};\nconst overflowActions = ({ actionGroups, expanded, overflowCount, }) => {\n    let needToSlotCount = overflowCount;\n    actionGroups.reverse().forEach((group) => {\n        let slottedWithinGroupCount = 0;\n        const groupActions = queryActions(group).reverse();\n        groupActions.forEach((groupAction) => {\n            if (groupAction.slot === SLOTS$1.menuActions) {\n                groupAction.removeAttribute(\"slot\");\n                groupAction.textEnabled = expanded;\n            }\n        });\n        if (needToSlotCount > 0) {\n            groupActions.some((groupAction) => {\n                const unslottedActions = groupActions.filter((action) => !action.slot);\n                if (unslottedActions.length > 1 && groupActions.length > 2 && !groupAction.closest(\"calcite-action-menu\")) {\n                    groupAction.textEnabled = true;\n                    groupAction.setAttribute(\"slot\", SLOTS$1.menuActions);\n                    slottedWithinGroupCount++;\n                    if (slottedWithinGroupCount > 1) {\n                        needToSlotCount--;\n                    }\n                }\n                return needToSlotCount < 1;\n            });\n        }\n        forceUpdate(group);\n    });\n};\n\nconst ICONS = {\n    chevronsLeft: \"chevrons-left\",\n    chevronsRight: \"chevrons-right\",\n};\nfunction getCalcitePosition(position, el) {\n    return position || el.closest(\"calcite-shell-panel\")?.position || \"start\";\n}\nfunction toggleChildActionText({ el, expanded, }) {\n    queryActions(el)\n        .filter((el) => el.slot !== SLOTS$1.menuActions)\n        .forEach((action) => (action.textEnabled = expanded));\n    el.querySelectorAll(\"calcite-action-group, calcite-action-menu\").forEach((el) => (el.expanded = expanded));\n}\nconst setTooltipReference = ({ tooltip, referenceElement, expanded, ref, }) => {\n    if (tooltip) {\n        tooltip.referenceElement = !expanded && referenceElement ? referenceElement : null;\n    }\n    if (ref) {\n        ref(referenceElement);\n    }\n    return referenceElement;\n};\nconst ExpandToggle = ({ expanded, expandText, collapseText, expandLabel, collapseLabel, toggle, el, position, tooltip, ref, scale, }) => {\n    const rtl = getElementDir(el) === \"rtl\";\n    const text = expanded ? collapseText : expandText;\n    const label = expanded ? collapseLabel : expandLabel;\n    const icons = [ICONS.chevronsLeft, ICONS.chevronsRight];\n    if (rtl) {\n        icons.reverse();\n    }\n    const end = getCalcitePosition(position, el) === \"end\";\n    const expandIcon = end ? icons[1] : icons[0];\n    const collapseIcon = end ? icons[0] : icons[1];\n    const actionNode = (h(\"calcite-action\", { icon: expanded ? expandIcon : collapseIcon, id: \"expand-toggle\", label: label, onClick: toggle, ref: (referenceElement) => setTooltipReference({ tooltip, referenceElement, expanded, ref }), scale: scale, text: text, textEnabled: expanded, title: !expanded && !tooltip ? text : null }));\n    return actionNode;\n};\n\nexport { ExpandToggle as E, getOverflowCount as a, geActionDimensions as g, overflowActions as o, queryActions as q, toggleChildActionText as t };\n\n//# sourceMappingURL=ExpandToggle-623527ca.js.map"],"names":["groupBufferPx","getAverage","arr","p","c","geActionDimensions","actions","actionsNotSlotted","action","SLOTS$1","actionLen","getMaxActionCount","width","actionWidth","layout","height","actionHeight","groupCount","maxContainerPx","avgItemPx","getOverflowCount","actionCount","queryActions","el","SLOTS","overflowActions","actionGroups","expanded","overflowCount","needToSlotCount","group","slottedWithinGroupCount","groupActions","groupAction","forceUpdate","ICONS","getCalcitePosition","position","_a","toggleChildActionText","setTooltipReference","tooltip","referenceElement","ref","ExpandToggle","expandText","collapseText","expandLabel","collapseLabel","toggle","scale","rtl","getElementDir","text","label","icons","end","expandIcon","collapseIcon","h"],"mappings":"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","x_google_ignoreList":[0]}