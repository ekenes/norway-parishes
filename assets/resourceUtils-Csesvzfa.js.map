{"version":3,"mappings":"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","names":["p","e","r","o","u","h","n","s","a","i","m","f","l","w","t","c","__vitePreload","d"],"ignoreList":[0],"sources":["../../node_modules/@arcgis/core/webdoc/support/resourceUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import{allSettledErrors as t,throwIfAborted as r,eachAlways as o}from\"../../core/promiseUtils.js\";import{generateUUID as s}from\"../../core/uuid.js\";import{getSiblingOfSameTypeI as a,contentToBlob as c}from\"../../portal/support/resourceUtils.js\";async function p(e,t,r){const o=await u(e,t,r);await h(o,t,r)}async function n(e,t,r,o,s){const a=await u(r,o,s);await e.update({data:t}),await h(a,o,s)}async function u(o,p,n){if(!p?.resources)return;const u=p.portalItem===o.portalItem?new Set(o.paths):new Set;o.paths.length=0,o.portalItem=p.portalItem;const h=new Set(p.resources.toKeep.map((e=>e.resource.path))),i=new Set,m=[];h.forEach((e=>{u.delete(e),o.paths.push(e)}));const f=[],l=[],w=[];for(const e of p.resources.toUpdate)if(u.delete(e.resource.path),h.has(e.resource.path)||i.has(e.resource.path)){const{resource:t,content:r,finish:p}=e,n=a(t,s());o.paths.push(n.path),f.push({resource:n,content:await c(r),compress:e.compress}),p&&w.push((()=>p(n)))}else{o.paths.push(e.resource.path),l.push({resource:e.resource,content:await c(e.content),compress:e.compress});const t=e.finish;t&&w.push((()=>t(e.resource))),i.add(e.resource.path)}for(const e of p.resources.toAdd)if(o.paths.push(e.resource.path),u.has(e.resource.path))u.delete(e.resource.path);else{f.push({resource:e.resource,content:await c(e.content),compress:e.compress});const t=e.finish;t&&w.push((()=>t(e.resource)))}if(f.length||l.length){const{addOrUpdateResources:e}=await import(\"../../portal/support/resourceUtils.js\");await e(p.portalItem,f,\"add\",n),await e(p.portalItem,l,\"update\",n)}if(w.forEach((e=>e())),0===m.length)return u;const d=await t(m);if(r(n),d.length>0)throw new e(\"save:resources\",\"Failed to save one or more resources\",{errors:d});return u}async function h(e,t,r){if(!e||!t.portalItem)return;const s=[];for(const o of e){const e=t.portalItem.resourceFromPath(o);s.push(e.portalItem.removeResource(e,r))}await o(s)}export{p as saveResources,n as updateItemWithResources};\n"],"file":"assets/resourceUtils-Csesvzfa.js"}