{"version":3,"file":"layersCreator-JvuQ_11W.js","sources":["../../node_modules/@arcgis/core/portal/support/featureCollectionUtils.js","../../node_modules/@arcgis/core/layers/support/layersCreator.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nfunction e(e){return t(e,\"notes\")}function r(e){return t(e,\"markup\")}function n(e){return t(e,\"route\")}function t(e,r){return!(!e.layerType||\"ArcGISFeatureLayer\"!==e.layerType)&&e.featureCollectionType===r}export{e as isMapNotesLayer,r as isMarkupLayer,n as isRouteLayer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Collection.js\";import\"../../core/has.js\";import{LayerLoadContext as r}from\"./LayerLoadContext.js\";import{layerLookupMap as a}from\"./lazyLayerLoader.js\";import t from\"../../portal/PortalItem.js\";import{isMapNotesLayer as y,isMarkupLayer as i,isRouteLayer as L}from\"../../portal/support/featureCollectionUtils.js\";import{selectLayerClassPath as n}from\"../../portal/support/portalLayers.js\";import{loadStyleRenderer as o}from\"../../renderers/support/styleUtils.js\";async function l(e,r,a){if(!r)return;const t=r.map((e=>G(e,a))),y=await Promise.allSettled(t);for(const i of y)\"rejected\"===i.status||i.value&&e.add(i.value)}const c={ArcGISDimensionLayer:\"DimensionLayer\",ArcGISFeatureLayer:\"FeatureLayer\",ArcGISImageServiceLayer:\"ImageryLayer\",ArcGISMapServiceLayer:\"MapImageLayer\",ArcGISSceneServiceLayer:\"SceneLayer\",ArcGISTiledElevationServiceLayer:\"ElevationLayer\",ArcGISTiledImageServiceLayer:\"ImageryTileLayer\",ArcGISTiledMapServiceLayer:\"TileLayer\",BuildingSceneLayer:\"BuildingSceneLayer\",CatalogLayer:\"CatalogLayer\",CSV:\"CSVLayer\",DefaultTileLayer:\"TileLayer\",GeoJSON:\"GeoJSONLayer\",GroupLayer:\"GroupLayer\",IntegratedMesh3DTilesLayer:\"IntegratedMesh3DTilesLayer\",IntegratedMeshLayer:\"IntegratedMeshLayer\",KML:\"KMLLayer\",LineOfSightLayer:\"LineOfSightLayer\",MediaLayer:\"MediaLayer\",OGCFeatureLayer:\"OGCFeatureLayer\",OrientedImageryLayer:\"OrientedImageryLayer\",PointCloudLayer:\"PointCloudLayer\",RasterDataLayer:\"UnsupportedLayer\",VectorTileLayer:\"VectorTileLayer\",ViewshedLayer:\"ViewshedLayer\",Voxel:\"VoxelLayer\",WFS:\"WFSLayer\",WMS:\"WMSLayer\",WebTiledLayer:\"WebTileLayer\"},s={ArcGISTiledElevationServiceLayer:\"ElevationLayer\",DefaultTileLayer:\"ElevationLayer\",RasterDataElevationLayer:\"UnsupportedLayer\"},p={ArcGISFeatureLayer:\"FeatureLayer\"},S={ArcGISImageServiceLayer:\"UnsupportedLayer\",ArcGISMapServiceLayer:\"UnsupportedLayer\",ArcGISSceneServiceLayer:\"SceneLayer\",ArcGISTiledImageServiceLayer:\"ImageryTileLayer\",ArcGISTiledMapServiceLayer:\"TileLayer\",DefaultTileLayer:\"TileLayer\",OpenStreetMap:\"OpenStreetMapLayer\",VectorTileLayer:\"VectorTileLayer\",WMS:\"UnsupportedLayer\",WebTiledLayer:\"WebTileLayer\"},u={ArcGISAnnotationLayer:\"UnsupportedLayer\",ArcGISDimensionLayer:\"UnsupportedLayer\",ArcGISFeatureLayer:\"FeatureLayer\",ArcGISImageServiceLayer:\"ImageryLayer\",ArcGISImageServiceVectorLayer:\"ImageryLayer\",ArcGISMapServiceLayer:\"MapImageLayer\",ArcGISStreamLayer:\"StreamLayer\",ArcGISTiledImageServiceLayer:\"ImageryTileLayer\",ArcGISTiledMapServiceLayer:\"TileLayer\",BingMapsAerial:\"BingMapsLayer\",BingMapsHybrid:\"BingMapsLayer\",BingMapsRoad:\"BingMapsLayer\",CatalogLayer:\"CatalogLayer\",CSV:\"CSVLayer\",DefaultTileLayer:\"TileLayer\",GeoJSON:\"GeoJSONLayer\",GeoRSS:\"GeoRSSLayer\",GroupLayer:\"GroupLayer\",KML:\"KMLLayer\",KnowledgeGraphLayer:\"KnowledgeGraphLayer\",MediaLayer:\"MediaLayer\",OGCFeatureLayer:\"OGCFeatureLayer\",OrientedImageryLayer:\"OrientedImageryLayer\",SubtypeGroupLayer:\"SubtypeGroupLayer\",VectorTileLayer:\"VectorTileLayer\",WFS:\"WFSLayer\",WMS:\"WMSLayer\",WebTiledLayer:\"WebTileLayer\"},d={ArcGISFeatureLayer:\"FeatureLayer\",SubtypeGroupTable:\"UnsupportedLayer\"},I={ArcGISImageServiceLayer:\"ImageryLayer\",ArcGISImageServiceVectorLayer:\"ImageryLayer\",ArcGISMapServiceLayer:\"MapImageLayer\",ArcGISTiledImageServiceLayer:\"ImageryTileLayer\",ArcGISTiledMapServiceLayer:\"TileLayer\",BingMapsAerial:\"BingMapsLayer\",BingMapsHybrid:\"BingMapsLayer\",BingMapsRoad:\"BingMapsLayer\",DefaultTileLayer:\"TileLayer\",OpenStreetMap:\"OpenStreetMapLayer\",VectorTileLayer:\"VectorTileLayer\",WMS:\"WMSLayer\",WebTiledLayer:\"WebTileLayer\"},m={...u,LinkChartLayer:\"LinkChartLayer\"},g={...d},T={...I};async function G(e,r){return f(await M(e,r),e,r)}async function f(e,r,a){const t=new e;return t.read(r,a.context),\"group\"===t.type&&(\"GroupLayer\"===r.layerType?await v(t,r,a):b(r)?h(t,r,a.context):A(r)&&await C(t,r,a.context)),await o(t,a.context),t}async function M(e,o){const l=o.context,c=w(l);let s=e.layerType||e.type;!s&&o?.defaultLayerType&&(s=o.defaultLayerType);const p=c[s];let S=p?a[p]:a.UnknownLayer;if(b(e)){const y=l?.portal;if(e.itemId){const i=new t({id:e.itemId,portal:y});await i.load();const L=(await n(i,new r)).className||\"UnknownLayer\";S=a[L]}}else\"ArcGISFeatureLayer\"===s?y(e)||i(e)?S=a.MapNotesLayer:L(e)?S=a.RouteLayer:A(e)&&(S=a.GroupLayer):e.wmtsInfo?.url&&e.wmtsInfo.layerIdentifier?S=a.WMTSLayer:\"WFS\"===s&&\"2.0.0\"!==e.wfsInfo?.version&&(S=a.UnsupportedLayer);return S()}function A(e){if(\"ArcGISFeatureLayer\"!==e.layerType||b(e))return!1;return(e.featureCollection?.layers?.length??0)>1}function b(e){return\"Feature Collection\"===e.type}function w(e){let r;switch(e.origin){case\"web-scene\":switch(e.layerContainerType){case\"basemap\":r=S;break;case\"ground\":r=s;break;case\"tables\":r=p;break;default:r=c}break;case\"link-chart\":switch(e.layerContainerType){case\"basemap\":r=T;break;case\"tables\":r=g;break;default:r=m}break;default:switch(e.layerContainerType){case\"basemap\":r=I;break;case\"tables\":r=d;break;default:r=u}}return r}async function v(r,a,t){const y=new e,i=l(y,Array.isArray(a.layers)?a.layers:[],t);try{try{if(await i,\"group\"===r.type)return r.layers.addMany(y),r}catch(L){r.destroy();for(const e of y)e.destroy();throw L}}catch(L){throw L}}function h(e,r,a){r.itemId&&(e.portalItem=new t({id:r.itemId,portal:a?.portal}),e.when((()=>{const t=t=>{const y=t.layerId;F(t,e,r,y,a);const i=r.featureCollection?.layers?.[y];i&&t.read(i,a)};e.layers?.forEach(t),e.tables?.forEach(t)})))}async function C(e,r,t){const y=a.FeatureLayer,i=await y(),L=r.featureCollection,n=L?.showLegend,o=L?.layers?.map(((a,y)=>{const L=new i;L.read(a,t);const o={...t,ignoreDefaults:!0};return F(L,e,r,y,o),null!=n&&L.read({showLegend:n},o),L}));e.layers.addMany(o??[])}function F(e,r,a,t,y){e.read({id:`${r.id}-sublayer-${t}`,visibility:a.visibleLayers?.includes(t)??!0},y)}export{v as populateGroupLayer,l as populateOperationalLayers};\n"],"names":["e","t","r","n","l","G","y","i","c","s","p","S","u","d","I","m","g","T","f","M","v","b","h","A","C","o","w","a","L","_b","_a","F"],"mappings":"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","x_google_ignoreList":[0,1]}