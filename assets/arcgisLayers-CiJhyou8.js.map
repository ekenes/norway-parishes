{"version":3,"mappings":"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","names":["y","f","e","r","a","s","w","l","n","i","u","__vitePreload","__vite_default__","d","p","m","t","I","o","v","L","_b","c","b","_c","g","_d","_e","_f","_g","S","_a","h"],"ignoreList":[0],"sources":["../../node_modules/@arcgis/core/layers/support/arcgisLayers.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import{getFilename as r,urlToObject as a}from\"../../core/urlUtils.js\";import{parse as t,parseNonStandardSublayerUrl as s}from\"./arcgisLayerUrl.js\";import{findAssociatedFeatureService as l}from\"./associatedFeatureServiceUtils.js\";import{getLayerModuleType as o,fetchFeatureService as n}from\"./fetchService.js\";import{sceneServiceLayerTypeToClassName as c}from\"./layerUtils.js\";import{layerLookupMap as i}from\"./lazyLayerLoader.js\";import{fetchArcGISServiceJSON as u}from\"../../support/requestPresets.js\";const y={FeatureLayer:!0,SceneLayer:!0};async function f(e){const{properties:r,url:a}=e,t={...r,url:a},s=await w(a,r?.customParameters),{Constructor:l,layerId:o,sourceJSON:n,parsedUrl:c,layers:i,tables:u}=s;if(i.length+u.length===0)return null!=o&&(t.layerId=o),null!=n&&(t.sourceJSON=n),new l(t);const y=new(0,(await import(\"../GroupLayer.js\")).default)({title:c.title});return await d(y,s,t),y}function p(e,r){return e?e.find((({id:e})=>e===r)):null}function m(e,r,a,t,s){const l={...s,layerId:r};return null!=e&&(l.url=e),null!=a&&(l.sourceJSON=a),\"sublayerTitleMode\"in t.prototype&&(l.sublayerTitleMode=\"service-name\"),new t(l)}async function d(e,r,a){const t=r.sublayerConstructorProvider;for(const{id:s,serverUrl:l}of r.layers){const o=p(r.sublayerInfos,s),n=m(l,s,o,(o&&t?.(o))??r.Constructor,a);e.add(n)}if(r.tables.length){const t=await I(\"FeatureLayer\");r.tables.forEach((({id:s,serverUrl:l})=>{const o=m(l,s,p(r.tableInfos,s),t,a);e.tables.add(o)}))}}async function w(r,a){let s=t(r);if(null==s&&(s=await v(r,a)),null==s)throw new e(\"arcgis-layers:url-mismatch\",\"The url '${url}' is not a valid arcgis resource\",{url:r});const{serverType:l,sublayer:n}=s;let i;const f={FeatureServer:\"FeatureLayer\",KnowledgeGraphServer:\"KnowledgeGraphLayer\",StreamServer:\"StreamLayer\",VectorTileServer:\"VectorTileLayer\",VideoServer:\"VideoLayer\"},p=\"FeatureServer\"===l,m=\"SceneServer\"===l,d={parsedUrl:s,Constructor:null,layerId:p||m?n??void 0:void 0,layers:[],tables:[]};switch(l){case\"MapServer\":if(null!=n){const{type:t}=await u(r,{customParameters:a});switch(i=\"FeatureLayer\",t){case\"Catalog Layer\":i=\"CatalogLayer\";break;case\"Catalog Dynamic Group Layer\":throw new e(\"arcgis-layers:unsupported\",`fromUrl() not supported for \"${t}\" layers`)}}else{i=await L(r,a)?\"TileLayer\":\"MapImageLayer\"}break;case\"ImageServer\":{const e=await u(r,{customParameters:a}),{tileInfo:t,cacheType:s}=e;i=t?\"LERC\"!==t?.format?.toUpperCase()||s&&\"elevation\"!==s.toLowerCase()?\"ImageryTileLayer\":\"ElevationLayer\":\"ImageryLayer\";break}case\"SceneServer\":{const e=await u(s.url.path,{customParameters:a});if(i=\"SceneLayer\",e){const r=e?.layers;if(\"Voxel\"===e?.layerType)i=\"VoxelLayer\";else if(r?.length){const e=r[0]?.layerType;null!=e&&null!=c[e]&&(i=c[e])}}break}case\"3DTilesServer\":throw new e(\"arcgis-layers:unsupported\",\"fromUrl() not supported for 3DTiles layers\");case\"FeatureServer\":if(i=\"FeatureLayer\",null!=n){const e=await u(r,{customParameters:a});d.sourceJSON=e,i=o(e.type)}break;default:i=f[l]}if(y[i]&&null==n){const e=await b(r,l,a);p&&(d.sublayerInfos=e.layerInfos,d.tableInfos=e.tableInfos);if(1!==e.layers.length+e.tables.length)d.layers=e.layers,d.tables=e.tables,p&&e.layerInfos?.length&&(d.sublayerConstructorProvider=await g(e.layerInfos));else if(p||m){const r=e.layerInfos?.[0]??e.tableInfos?.[0];if(d.layerId=e.layers[0]?.id??e.tables[0]?.id,d.sourceJSON=r,p){const e=r?.type;i=o(e)}}}return d.Constructor=await I(i),d}async function v(e,t){const l=await u(e,{customParameters:t});let o=null,n=null;const c=l.type;if(\"Feature Layer\"===c||\"Table\"===c?(o=\"FeatureServer\",n=l.id??null):\"indexedVector\"===c?o=\"VectorTileServer\":l.hasOwnProperty(\"mapName\")?o=\"MapServer\":l.hasOwnProperty(\"bandCount\")&&l.hasOwnProperty(\"pixelSizeX\")?o=\"ImageServer\":l.hasOwnProperty(\"maxRecordCount\")&&l.hasOwnProperty(\"allowGeometryUpdates\")?o=\"FeatureServer\":l.hasOwnProperty(\"streamUrls\")?o=\"StreamServer\":S(l)?(o=\"SceneServer\",n=l.id):l.hasOwnProperty(\"layers\")&&S(l.layers?.[0])&&(o=\"SceneServer\"),!o)return null;const i=null!=n?s(e):null;return{title:null!=i&&l.name||r(e),serverType:o,sublayer:n,url:{path:null!=i?i.serviceUrl:a(e).path}}}function S(e){return null!=e&&e.hasOwnProperty(\"store\")&&e.hasOwnProperty(\"id\")&&\"number\"==typeof e.id}async function b(e,r,a){let t,s,l=!1;switch(r){case\"FeatureServer\":{const r=await n(e,{customParameters:a});l=!!r.layersJSON,t=r.layersJSON||r.serviceJSON;break}case\"SceneServer\":{const r=await h(e,a);t=r.serviceInfo,s=r.tableServerUrl;break}default:t=await u(e,{customParameters:a})}const o=t?.layers,c=t?.tables;return{layers:o?.map((e=>({id:e.id}))).reverse()||[],tables:c?.map((e=>({serverUrl:s,id:e.id}))).reverse()||[],layerInfos:l?o:[],tableInfos:l?c:[]}}async function h(e,r){const a=await u(e,{customParameters:r}),t=a.layers?.[0];if(!t)return{serviceInfo:a};try{const{serverUrl:t}=await l(e),s=await u(t,{customParameters:r}).catch((()=>null));return s&&(a.tables=s.tables),{serviceInfo:a,tableServerUrl:t}}catch{return{serviceInfo:a}}}async function I(e){return(0,i[e])()}async function L(e,r){return(await u(e,{customParameters:r})).tileInfo}async function g(e){if(!e.length)return;const r=new Set,a=[];for(const{type:l}of e)r.has(l)||(r.add(l),a.push(I(o(l))));const t=await Promise.all(a),s=new Map;return Array.from(r).forEach(((e,r)=>{s.set(e,t[r])})),e=>s.get(e.type)}export{f as fromUrl};\n"],"file":"assets/arcgisLayers-CiJhyou8.js"}