{"version":3,"file":"calcite-inline-editable.entry-C4SC9Ro8.js","sources":["../../node_modules/@esri/calcite-components/dist/esm/calcite-inline-editable.entry.js"],"sourcesContent":["/*!\n * All material copyright ESRI, All Rights Reserved, unless otherwise specified.\n * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.\n * v2.13.2\n */\nimport { r as registerInstance, c as createEvent, h, g as getElement } from './index-abe3b66e.js';\nimport { e as getSlotted } from './dom-b6dedd88.js';\nimport { u as updateHostInteraction, I as InteractiveContainer } from './interactive-1a42577a.js';\nimport { c as connectLabel, d as disconnectLabel, g as getLabelText } from './label-043ae25a.js';\nimport { s as setUpLoadableComponent, a as setComponentLoaded, c as componentFocusable } from './loadable-13e9ffb2.js';\nimport { c as connectLocalized, d as disconnectLocalized } from './locale-60f8ca58.js';\nimport { c as createObserver } from './observers-9c166451.js';\nimport { c as connectMessages, s as setUpMessages, d as disconnectMessages, u as updateMessages } from './t9n-75defee3.js';\nimport './guid-9c230b6a.js';\nimport './resources-a23d2491.js';\nimport './component-5f0a8be8.js';\nimport './browser-618ac057.js';\nimport './key-3ee05994.js';\n\nconst CSS = {\n    wrapper: \"wrapper\",\n    confirmChangesButton: \"confirm-changes-button\",\n    cancelEditingButton: \"cancel-editing-button\",\n    inputWrapper: \"input-wrapper\",\n    cancelEditingButtonWrapper: \"cancel-editing-button-wrapper\",\n    enableEditingButton: \"enable-editing-button\",\n    controlsWrapper: \"controls-wrapper\",\n};\n\nconst inlineEditableCss = \":host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block}:host([scale=s]) .controls-wrapper{block-size:1.5rem}:host([scale=m]) .controls-wrapper{block-size:2rem}:host([scale=l]) .controls-wrapper{block-size:2.75rem}:host(:not([editing-enabled]):not([disabled])) .wrapper:hover{background-color:var(--calcite-color-foreground-2)}.wrapper{box-sizing:border-box;display:flex;justify-content:space-between;background-color:var(--calcite-color-foreground-1);transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}.wrapper .input-wrapper{flex:1 1 0%}.controls-wrapper{display:flex}:host([disabled]) .cancel-editing-button-wrapper{border-color:var(--calcite-color-border-2)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}\";\nconst CalciteInlineEditableStyle0 = inlineEditableCss;\n\nconst InlineEditable = class {\n    constructor(hostRef) {\n        registerInstance(this, hostRef);\n        this.calciteInlineEditableEditCancel = createEvent(this, \"calciteInlineEditableEditCancel\", 6);\n        this.calciteInlineEditableEditConfirm = createEvent(this, \"calciteInlineEditableEditConfirm\", 6);\n        this.calciteInternalInlineEditableEnableEditingChange = createEvent(this, \"calciteInternalInlineEditableEnableEditingChange\", 6);\n        this.mutationObserver = createObserver(\"mutation\", () => this.mutationObserverCallback());\n        this.enableEditing = () => {\n            this.valuePriorToEditing = this.inputElement?.value;\n            this.editingEnabled = true;\n            this.inputElement?.setFocus();\n            this.calciteInternalInlineEditableEnableEditingChange.emit();\n        };\n        this.disableEditing = () => {\n            this.editingEnabled = false;\n        };\n        this.cancelEditing = () => {\n            if (this.inputElement) {\n                this.inputElement.value = this.valuePriorToEditing;\n            }\n            this.disableEditing();\n            this.enableEditingButton.setFocus();\n            if (!this.editingEnabled && !!this.shouldEmitCancel) {\n                this.calciteInlineEditableEditCancel.emit();\n            }\n        };\n        this.escapeKeyHandler = async (event) => {\n            if (event.defaultPrevented) {\n                return;\n            }\n            if (event.key === \"Escape\") {\n                event.preventDefault();\n                this.cancelEditing();\n            }\n            if (event.key === \"Tab\" && this.shouldShowControls) {\n                if (!event.shiftKey && event.target === this.inputElement) {\n                    event.preventDefault();\n                    this.cancelEditingButton.setFocus();\n                }\n                if (!!event.shiftKey && event.target === this.cancelEditingButton) {\n                    event.preventDefault();\n                    this.inputElement?.setFocus();\n                }\n            }\n        };\n        this.cancelEditingHandler = async (event) => {\n            event.preventDefault();\n            this.cancelEditing();\n        };\n        this.enableEditingHandler = async (event) => {\n            if (this.disabled ||\n                event.target === this.cancelEditingButton ||\n                event.target === this.confirmEditingButton) {\n                return;\n            }\n            event.preventDefault();\n            if (!this.editingEnabled) {\n                this.enableEditing();\n            }\n        };\n        this.confirmChangesHandler = async (event) => {\n            event.preventDefault();\n            this.calciteInlineEditableEditConfirm.emit();\n            try {\n                if (this.afterConfirm) {\n                    this.loading = true;\n                    await this.afterConfirm();\n                    this.disableEditing();\n                    this.enableEditingButton.setFocus();\n                }\n            }\n            catch (error) {\n                // we handle error in finally block\n            }\n            finally {\n                this.loading = false;\n            }\n        };\n        this.disabled = false;\n        this.editingEnabled = false;\n        this.loading = false;\n        this.controls = false;\n        this.scale = undefined;\n        this.afterConfirm = undefined;\n        this.messages = undefined;\n        this.messageOverrides = undefined;\n        this.defaultMessages = undefined;\n        this.effectiveLocale = undefined;\n    }\n    disabledWatcher(disabled) {\n        if (this.inputElement) {\n            this.inputElement.disabled = disabled;\n        }\n    }\n    editingEnabledWatcher(newValue, oldValue) {\n        if (this.inputElement) {\n            this.inputElement.editingEnabled = newValue;\n        }\n        if (!newValue && !!oldValue) {\n            this.shouldEmitCancel = true;\n        }\n    }\n    onMessagesChange() {\n        /* wired up by t9n util */\n    }\n    //--------------------------------------------------------------------------\n    //\n    //  Lifecycle\n    //\n    //--------------------------------------------------------------------------\n    connectedCallback() {\n        connectLabel(this);\n        connectLocalized(this);\n        connectMessages(this);\n        this.mutationObserver?.observe(this.el, { childList: true });\n        this.mutationObserverCallback();\n    }\n    async componentWillLoad() {\n        setUpLoadableComponent(this);\n        await setUpMessages(this);\n    }\n    componentDidLoad() {\n        setComponentLoaded(this);\n    }\n    disconnectedCallback() {\n        disconnectLabel(this);\n        disconnectLocalized(this);\n        disconnectMessages(this);\n        this.mutationObserver?.disconnect();\n    }\n    componentDidRender() {\n        updateHostInteraction(this);\n    }\n    render() {\n        return (h(InteractiveContainer, { key: '2b20c0c889e02709ab25fed13afe8cc03a0ad5a5', disabled: this.disabled }, h(\"div\", { key: '31a6ae689e94a21c34718d848e43e7e848c82c33', class: CSS.wrapper, onClick: this.enableEditingHandler, onKeyDown: this.escapeKeyHandler }, h(\"div\", { key: '21d48b4543d362c8253987aa04aa88b91dcbebd2', class: CSS.inputWrapper }, h(\"slot\", { key: '1b0e62cefa8959014d776a55e882d89c1038d72e' })), h(\"div\", { key: 'c10288b692a896c7d4a924fb3a99d5d1a0b8b655', class: CSS.controlsWrapper }, h(\"calcite-button\", { key: '7b8312b37c3e1aa9e07b6cbad9f116c0e3b63438', appearance: \"transparent\", class: CSS.enableEditingButton, disabled: this.disabled, iconStart: \"pencil\", kind: \"neutral\", label: this.messages.enableEditing, onClick: this.enableEditingHandler, ref: (el) => (this.enableEditingButton = el), scale: this.scale, style: {\n                opacity: this.editingEnabled ? \"0\" : \"1\",\n                width: this.editingEnabled ? \"0\" : \"inherit\",\n            }, type: \"button\" }), this.shouldShowControls && [\n            h(\"div\", { key: '96dc366959dff0b01f2b6720d04137d978b480ba', class: CSS.cancelEditingButtonWrapper }, h(\"calcite-button\", { key: '74263d601b8f410497061c2a61ad9a7cc0950651', appearance: \"transparent\", class: CSS.cancelEditingButton, disabled: this.disabled, iconStart: \"x\", kind: \"neutral\", label: this.messages.cancelEditing, onClick: this.cancelEditingHandler, ref: (el) => (this.cancelEditingButton = el), scale: this.scale, type: \"button\" })),\n            h(\"calcite-button\", { key: 'b6b0853810cb99eb88c908487078cc74e05f48bc', appearance: \"solid\", class: CSS.confirmChangesButton, disabled: this.disabled, iconStart: \"check\", kind: \"brand\", label: this.messages.confirmChanges, loading: this.loading, onClick: this.confirmChangesHandler, ref: (el) => (this.confirmEditingButton = el), scale: this.scale, type: \"button\" }),\n        ]))));\n    }\n    //--------------------------------------------------------------------------\n    //\n    //  Event Listeners\n    //\n    //--------------------------------------------------------------------------\n    blurHandler() {\n        if (!this.controls) {\n            this.disableEditing();\n        }\n    }\n    effectiveLocaleChange() {\n        updateMessages(this, this.effectiveLocale);\n    }\n    //--------------------------------------------------------------------------\n    //\n    //  Public Methods\n    //\n    //--------------------------------------------------------------------------\n    /** Sets focus on the component. */\n    async setFocus() {\n        await componentFocusable(this);\n        this.el?.focus();\n    }\n    //--------------------------------------------------------------------------\n    //\n    //  Private Methods\n    //\n    //--------------------------------------------------------------------------\n    mutationObserverCallback() {\n        this.updateSlottedInput();\n        this.scale = this.scale || this.inputElement?.scale;\n    }\n    onLabelClick() {\n        this.setFocus();\n    }\n    updateSlottedInput() {\n        const inputElement = getSlotted(this.el, {\n            matches: \"calcite-input\",\n        });\n        this.inputElement = inputElement;\n        if (!inputElement) {\n            return;\n        }\n        this.inputElement.disabled = this.disabled;\n        this.inputElement.label = this.inputElement.label || getLabelText(this);\n    }\n    get shouldShowControls() {\n        return this.editingEnabled && this.controls;\n    }\n    static get delegatesFocus() { return true; }\n    static get assetsDirs() { return [\"assets\"]; }\n    get el() { return getElement(this); }\n    static get watchers() { return {\n        \"disabled\": [\"disabledWatcher\"],\n        \"editingEnabled\": [\"editingEnabledWatcher\"],\n        \"messageOverrides\": [\"onMessagesChange\"],\n        \"effectiveLocale\": [\"effectiveLocaleChange\"]\n    }; }\n};\nInlineEditable.style = CalciteInlineEditableStyle0;\n\nexport { InlineEditable as calcite_inline_editable };\n\n//# sourceMappingURL=calcite-inline-editable.entry.js.map"],"names":["CSS","inlineEditableCss","CalciteInlineEditableStyle0","InlineEditable","hostRef","registerInstance","createEvent","createObserver","_a","_b","event","disabled","newValue","oldValue","connectLabel","connectLocalized","connectMessages","setUpLoadableComponent","setUpMessages","setComponentLoaded","disconnectLabel","disconnectLocalized","disconnectMessages","updateHostInteraction","h","InteractiveContainer","el","updateMessages","componentFocusable","inputElement","getSlotted","getLabelText","getElement"],"mappings":"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","x_google_ignoreList":[0]}