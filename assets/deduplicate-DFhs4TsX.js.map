{"version":3,"file":"deduplicate-DFhs4TsX.js","sources":["../../node_modules/@arcgis/core/geometry/support/meshUtils/deduplicate.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{nextHighestPowerOfTwo as t}from\"../../../core/mathUtils.js\";import{newIndexArray as n,compactIndices as r}from\"../Indices.js\";function e(e,s,u){const c=Array.isArray(e),a=c?e.length/s:e.byteLength/(4*s),h=c?e:new Uint32Array(e,0,a*s),y=u?.minReduction??0,A=u?.originalIndices||null,g=A?A.length:0,m=u?.componentOffsets||null;let w=0;if(m)for(let t=0;t<m.length-1;t++){const n=m[t+1]-m[t];n>w&&(w=n)}else w=a;const U=Math.floor(1.1*w)+1;(null==i||i.length<2*U)&&(i=new Uint32Array(t(2*U)));for(let t=0;t<2*U;t++)i[t]=0;let b=0;const d=!!m&&!!A,p=d?g:a;let M=n(a);const j=new Uint32Array(g),q=1.96;let I=0!==y?Math.ceil(4*q*q/(y*y)*y*(1-y)):p,k=1,x=m?m[1]:p;for(let t=0;t<p;t++){if(t===I){const n=1-b/t;if(n+q*Math.sqrt(n*(1-n)/t)<y)return null;I*=2}if(t===x){for(let t=0;t<2*U;t++)i[t]=0;if(A)for(let t=m[k-1];t<m[k];t++)j[t]=M[A[t]];x=m[++k]}const n=d?A[t]:t,r=n*s,e=f(h,r,s);let o=e%U,u=b;for(;0!==i[2*o+1];){if(i[2*o]===e){const t=i[2*o+1]-1;if(l(h,r,t*s,s)){u=M[t];break}}o++,o>=U&&(o-=U)}u===b&&(i[2*o]=e,i[2*o+1]=n+1,b++),M[n]=u}if(0!==y&&1-b/a<y)return null;if(d){for(let t=m[k-1];t<j.length;t++)j[t]=M[A[t]];M=r(j)}const C=c?new Array(b):new Uint32Array(b*s);b=0;for(let t=0;t<p;t++)if(M[t]===b){o(h,(d?A[t]:t)*s,C,b*s,s),b++}if(A&&!d){const t=new Uint32Array(g);for(let n=0;n<t.length;n++)t[n]=M[A[n]];M=r(t)}return{buffer:Array.isArray(C)?C:C.buffer,indices:M,uniqueCount:b}}function l(t,n,r,e){for(let l=0;l<e;l++)if(t[n+l]!==t[r+l])return!1;return!0}function o(t,n,r,e,l){for(let o=0;o<l;o++)r[e+o]=t[n+o]}function f(t,n,r){let e=0;for(let l=0;l<r;l++)e=t[n+l]+e|0,e=e+(e<<11)+(e>>>2)|0;return e>>>0}let i=null;export{e as deduplicate};\n"],"names":["e","s","u","c","a","h","y","A","g","m","w","n","U","i","t","b","d","p","M","j","q","k","x","r","f","o","l","C"],"mappings":"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","x_google_ignoreList":[0]}