import{r as l,c as s,h as i,g as c}from"./index-0pHHYqT1.js";import{d}from"./dom-b6dedd88-5qranp7U.js";import{u as o,I as r}from"./interactive-1a42577a-BY0SXEZS.js";import{c as h,d as b,g as u}from"./label-043ae25a-Bx-72bR0.js";import{s as p,a as g,c as f}from"./loadable-13e9ffb2-Do8PDy1Z.js";import{c as E,d as m}from"./locale-60f8ca58-YlL37k5q.js";import{c as y}from"./observers-9c166451-zR5RaL5w.js";import{c as C,s as k,d as v,u as w}from"./t9n-75defee3-Cssc6h5v.js";import"./guid-9c230b6a-BxSjQh8J.js";import"./component-5f0a8be8-6CIDVndn.js";import"./key-3ee05994-D63ExP77.js";/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const n={wrapper:"wrapper",confirmChangesButton:"confirm-changes-button",cancelEditingButton:"cancel-editing-button",inputWrapper:"input-wrapper",cancelEditingButtonWrapper:"cancel-editing-button-wrapper",enableEditingButton:"enable-editing-button",controlsWrapper:"controls-wrapper"},I=":host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block}:host([scale=s]) .controls-wrapper{block-size:1.5rem}:host([scale=m]) .controls-wrapper{block-size:2rem}:host([scale=l]) .controls-wrapper{block-size:2.75rem}:host(:not([editing-enabled]):not([disabled])) .wrapper:hover{background-color:var(--calcite-color-foreground-2)}.wrapper{box-sizing:border-box;display:flex;justify-content:space-between;background-color:var(--calcite-color-foreground-1);transition:background-color, block-size, border-color, box-shadow, color, inset-block-end, inset-block-start, inset-inline-end, inset-inline-start inset-size, opacity, outline-color, transform var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}.wrapper .input-wrapper{flex:1 1 0%}.controls-wrapper{display:flex}:host([disabled]) .cancel-editing-button-wrapper{border-color:var(--calcite-color-border-2)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}",B=I,L=class{constructor(e){l(this,e),this.calciteInlineEditableEditCancel=s(this,"calciteInlineEditableEditCancel",6),this.calciteInlineEditableEditConfirm=s(this,"calciteInlineEditableEditConfirm",6),this.calciteInternalInlineEditableEnableEditingChange=s(this,"calciteInternalInlineEditableEnableEditingChange",6),this.mutationObserver=y("mutation",()=>this.mutationObserverCallback()),this.enableEditing=()=>{var t,a;this.valuePriorToEditing=(t=this.inputElement)==null?void 0:t.value,this.editingEnabled=!0,(a=this.inputElement)==null||a.setFocus(),this.calciteInternalInlineEditableEnableEditingChange.emit()},this.disableEditing=()=>{this.editingEnabled=!1},this.cancelEditing=()=>{this.inputElement&&(this.inputElement.value=this.valuePriorToEditing),this.disableEditing(),this.enableEditingButton.setFocus(),!this.editingEnabled&&this.shouldEmitCancel&&this.calciteInlineEditableEditCancel.emit()},this.escapeKeyHandler=async t=>{var a;t.defaultPrevented||(t.key==="Escape"&&(t.preventDefault(),this.cancelEditing()),t.key==="Tab"&&this.shouldShowControls&&(!t.shiftKey&&t.target===this.inputElement&&(t.preventDefault(),this.cancelEditingButton.setFocus()),t.shiftKey&&t.target===this.cancelEditingButton&&(t.preventDefault(),(a=this.inputElement)==null||a.setFocus())))},this.cancelEditingHandler=async t=>{t.preventDefault(),this.cancelEditing()},this.enableEditingHandler=async t=>{this.disabled||t.target===this.cancelEditingButton||t.target===this.confirmEditingButton||(t.preventDefault(),this.editingEnabled||this.enableEditing())},this.confirmChangesHandler=async t=>{t.preventDefault(),this.calciteInlineEditableEditConfirm.emit();try{this.afterConfirm&&(this.loading=!0,await this.afterConfirm(),this.disableEditing(),this.enableEditingButton.setFocus())}catch{}finally{this.loading=!1}},this.disabled=!1,this.editingEnabled=!1,this.loading=!1,this.controls=!1,this.scale=void 0,this.afterConfirm=void 0,this.messages=void 0,this.messageOverrides=void 0,this.defaultMessages=void 0,this.effectiveLocale=void 0}disabledWatcher(e){this.inputElement&&(this.inputElement.disabled=e)}editingEnabledWatcher(e,t){this.inputElement&&(this.inputElement.editingEnabled=e),!e&&t&&(this.shouldEmitCancel=!0)}onMessagesChange(){}connectedCallback(){var e;h(this),E(this),C(this),(e=this.mutationObserver)==null||e.observe(this.el,{childList:!0}),this.mutationObserverCallback()}async componentWillLoad(){p(this),await k(this)}componentDidLoad(){g(this)}disconnectedCallback(){var e;b(this),m(this),v(this),(e=this.mutationObserver)==null||e.disconnect()}componentDidRender(){o(this)}render(){return i(r,{key:"2b20c0c889e02709ab25fed13afe8cc03a0ad5a5",disabled:this.disabled},i("div",{key:"31a6ae689e94a21c34718d848e43e7e848c82c33",class:n.wrapper,onClick:this.enableEditingHandler,onKeyDown:this.escapeKeyHandler},i("div",{key:"21d48b4543d362c8253987aa04aa88b91dcbebd2",class:n.inputWrapper},i("slot",{key:"1b0e62cefa8959014d776a55e882d89c1038d72e"})),i("div",{key:"c10288b692a896c7d4a924fb3a99d5d1a0b8b655",class:n.controlsWrapper},i("calcite-button",{key:"7b8312b37c3e1aa9e07b6cbad9f116c0e3b63438",appearance:"transparent",class:n.enableEditingButton,disabled:this.disabled,iconStart:"pencil",kind:"neutral",label:this.messages.enableEditing,onClick:this.enableEditingHandler,ref:e=>this.enableEditingButton=e,scale:this.scale,style:{opacity:this.editingEnabled?"0":"1",width:this.editingEnabled?"0":"inherit"},type:"button"}),this.shouldShowControls&&[i("div",{key:"96dc366959dff0b01f2b6720d04137d978b480ba",class:n.cancelEditingButtonWrapper},i("calcite-button",{key:"74263d601b8f410497061c2a61ad9a7cc0950651",appearance:"transparent",class:n.cancelEditingButton,disabled:this.disabled,iconStart:"x",kind:"neutral",label:this.messages.cancelEditing,onClick:this.cancelEditingHandler,ref:e=>this.cancelEditingButton=e,scale:this.scale,type:"button"})),i("calcite-button",{key:"b6b0853810cb99eb88c908487078cc74e05f48bc",appearance:"solid",class:n.confirmChangesButton,disabled:this.disabled,iconStart:"check",kind:"brand",label:this.messages.confirmChanges,loading:this.loading,onClick:this.confirmChangesHandler,ref:e=>this.confirmEditingButton=e,scale:this.scale,type:"button"})])))}blurHandler(){this.controls||this.disableEditing()}effectiveLocaleChange(){w(this,this.effectiveLocale)}async setFocus(){var e;await f(this),(e=this.el)==null||e.focus()}mutationObserverCallback(){var e;this.updateSlottedInput(),this.scale=this.scale||((e=this.inputElement)==null?void 0:e.scale)}onLabelClick(){this.setFocus()}updateSlottedInput(){const e=d(this.el,{matches:"calcite-input"});this.inputElement=e,e&&(this.inputElement.disabled=this.disabled,this.inputElement.label=this.inputElement.label||u(this))}get shouldShowControls(){return this.editingEnabled&&this.controls}static get delegatesFocus(){return!0}static get assetsDirs(){return["assets"]}get el(){return c(this)}static get watchers(){return{disabled:["disabledWatcher"],editingEnabled:["editingEnabledWatcher"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}};L.style=B;export{L as calcite_inline_editable};
//# sourceMappingURL=calcite-inline-editable.entry-ByTJaiMd.js.map
