{"version":3,"file":"pixelRangeUtils-Ba7Ehdiw.js","sources":["../../node_modules/@arcgis/core/layers/support/rasterFormats/pixelRangeUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nconst t=9999999e31,n=2e-7,e={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34028234663852886e22,34028234663852886e22],f64:[-Number.MAX_VALUE,Number.MAX_VALUE],unknown:void 0,c64:void 0,c128:void 0};function s(t){return e[t]??[-34028234663852886e22,34028234663852886e22]}function u(t,n){return null==t||null==n?\"s32\":t<0?t>=-128&&n<128?\"s8\":t>=-32768&&n<32768?\"s16\":\"s32\":n<256?\"u8\":n<65536?\"u16\":\"u32\"}function o(t){return(t?.startsWith(\"s\")||t?.startsWith(\"u\"))??!1}function i(t,n,e,u){let[i,l]=s(e);const a=o(e);return a&&(i-=1e-5,l+=1e-5),a?e.startsWith(\"u\")?c(t,n,u,[i,l]):f(t,n,u,[i,l]):r(t,n,u,[i,l])}function l(t,n){for(let e=0;e<n.length;e++)n[e]&&isNaN(t[e])&&(n[e]=0,t[e]=0)}function c(t,n,e,s){const[u,o]=s;for(let i=0;i<n.length;i++)if(n[i]){const s=t[i];s<u||s>o?n[i]=0:e[i]=s+.5|0}}function f(t,n,e,s){const[u,o]=s;for(let i=0;i<n.length;i++)if(n[i]){const s=t[i];s<u||s>o?n[i]=0:e[i]=s+(s>0?.5:-.5)|0}}function r(t,n,e,s){const[u,o]=s;for(let i=0;i<n.length;i++)if(n[i]){const s=t[i];s<u||s>o?n[i]=0:e[i]=s}}function a(e,u,o){if(e.depthCount&&e.depthCount>1)return;const{pixels:i,statistics:l,pixelType:c}=e,f=i[0].length,r=e.bandMasks??[],a=e.mask??new Uint8Array(f).fill(255),h=\"f32\"===c||\"f64\"===c,b=s(c);let m=!1;for(let s=0;s<i.length;s++){const e=\"number\"==typeof u?u:u[s];if(null==e)continue;const f=l?.[s]?.minValue??b[0],d=l?.[s]?.maxValue??b[1];if(f>e+Number.EPSILON||d<e-Number.EPSILON)continue;const p=r[s]||a.slice(),N=i[s],g=o?.customFloatTolerance;if(h&&0!==g){let s=g;s||(s=Math.abs(e)>=t?n*Math.abs(e):\"f32\"===c?2**-23:Number.EPSILON);for(let t=0;t<N.length;t++)p[t]&&Math.abs(N[t]-e)<s&&(N[t]=0,p[t]=0,a[t]=0,m=!0)}else for(let t=0;t<N.length;t++)p[t]&&N[t]===e&&(N[t]=0,p[t]=0,a[t]=0,m=!0);r[s]=p}m&&(e.bandMasks=e.bandMasks||e.pixels.length>1?r:null,e.mask=a),m&&\"updateStatistics\"in e&&e.updateStatistics()}export{i as clipBandToPixelTypeRange,a as convertNoDataToMask,l as fixNaN,u as getIntegerPixelType,s as getPixelValueRange,o as isIntegerPixelType};\n"],"names":["t","n","e","s","u","o","i","l","a","c","f","r","_a","_b","h","b","m","d","p","N","g"],"mappings":"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","x_google_ignoreList":[0]}